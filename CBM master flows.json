[{"id":"8f4b7b2c.8cafc8","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"974f83a0.4973a","type":"tab","label":"Live Status","disabled":false,"info":""},{"id":"79016d77.f7b894","type":"tab","label":"Alert","disabled":false,"info":""},{"id":"b93974df.3f7a08","type":"tab","label":"IP Address","disabled":false,"info":""},{"id":"c13cdbe0.4cd118","type":"tab","label":"CSV Settings","disabled":false,"info":""},{"id":"52c72415.3d508c","type":"ui_group","z":"","name":"Panel ","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"f04de880.413698","type":"ui_group","z":"","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"22","collapse":true},{"id":"aedf5218.fcc09","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"14f80c95.c03ac3","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"abd47224.3b0f","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"9fa856e.a34e3a8","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"5a2df5f0.ac795c","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"127a4200.ca2d6e","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"25","collapse":false},{"id":"5f16c37a.e89a4c","type":"serial-port","z":"","serialport":"/dev/ttyACM0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"42863e20.92ae3","type":"ui_tab","z":"","name":"CPU Settings","icon":"fa-cog","order":3,"disabled":false,"hidden":false},{"id":"120c7191.5a4fae","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"79ba39f2.e289b8","type":"serial-port","z":"","serialport":"/dev/ttyS1","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"8f8cccf3.6c5dc","type":"ui_group","z":"","name":"Machine Details","tab":"42863e20.92ae3","order":1,"disp":true,"width":"12","collapse":true},{"id":"7ff8cd14.1c8d84","type":"ui_group","z":"","name":"CPU TEMPERATURE","tab":"42863e20.92ae3","order":3,"disp":true,"width":"24","collapse":false},{"id":"5b9c82d4.c490cc","type":"ui_group","name":"7 pH calibration","tab":"96e407a4.1e5f28","order":1,"disp":true,"width":"12","collapse":false},{"id":"21ac8585.16698a","type":"ui_group","name":"4 pH calibration ","tab":"96e407a4.1e5f28","order":2,"disp":true,"width":"12","collapse":false},{"id":"ddf2e74f.a7c728","type":"ui_group","name":"Clear calibration input","tab":"96e407a4.1e5f28","order":3,"disp":true,"width":"12","collapse":false},{"id":"96e407a4.1e5f28","type":"ui_tab","z":"","name":"Calibration","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"9c8e69f2.947a18","type":"ui_tab","z":"","name":"Mikron UCP600","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"2bf05bec.224e34","type":"ui_group","z":"","name":"Tank","tab":"9c8e69f2.947a18","order":1,"disp":true,"width":"24","collapse":false},{"id":"97f367d3.be02e8","type":"ui_group","z":"","name":"Machine","tab":"9c8e69f2.947a18","order":2,"disp":true,"width":"24","collapse":false},{"id":"fabeb781.d7e1d8","type":"ui_group","name":"X-axis","tab":"","order":4,"disp":true,"width":"12","collapse":false},{"id":"18d2f718.e93609","type":"ui_group","z":"","name":"Vibration Slave 1","tab":"9c8e69f2.947a18","order":3,"disp":true,"width":"12","collapse":false},{"id":"a1f0b91d.edac28","type":"serial-port","z":"","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"52713e03.88a0d","type":"modbus-client","z":"","name":"","clienttype":"serial","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB0","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"2","serialParity":"none","serialConnectionDelay":"100","unit_id":"2","commandDelay":"1","clientTimeout":"1000","reconnectOnTimeout":true,"reconnectTimeout":"2000","parallelUnitIdsAllowed":true},{"id":"35a7c70.bc8f43a","type":"ui_group","name":"7 pH calibration","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"fe9ecfed.c5674","type":"ui_group","name":"4 pH calibration ","tab":"","order":2,"disp":true,"width":"12","collapse":false},{"id":"ac89b4a2.ee6a38","type":"ui_group","name":"Clear calibration input","tab":"","order":3,"disp":true,"width":"12","collapse":false},{"id":"ac3f85fc.a56f98","type":"serial-port","z":"","serialport":"/dev/ttyACM0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"24ca6449.d3e05c","type":"ui_group","z":"","name":"Live Status","tab":"","order":2,"disp":true,"width":"24","collapse":true},{"id":"bc211a69.ed5e38","type":"ui_group","z":"","name":"pH Dozing Settings","tab":"","order":4,"disp":true,"width":"24","collapse":false},{"id":"aea45f69.b0042","type":"serial-port","serialport":"/dev/ttyACM0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"b02d8341.3dc2c","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"914e5f1f.fdca5","type":"ui_group","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"d24241e6.70d81","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"298a24d5.e2ad0c","type":"ui_group","z":"","name":"Conductivity Dozing Settings","tab":"","order":5,"disp":true,"width":"24","collapse":false},{"id":"255cfdbe.046dc2","type":"serial-port","z":"","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"6e81bcc5.4045d4","type":"ui_group","z":"","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"42476a0.edffa98","type":"serial-port","z":"","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"7caac22c.a1cf7c","type":"ui_group","z":"","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"c434c579.b06658","type":"MySQLdatabase","z":"","name":"","host":"127.0.0.1","port":"3306","db":"nw_buffer_db","tz":""},{"id":"48c5b9e1.6effd8","type":"ui_group","z":"","name":"Density Calibration","tab":"","order":6,"disp":true,"width":"24","collapse":false},{"id":"f8cbce34.6565b","type":"ui_group","z":"","name":"Dozing Status","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"4147b028.194a7","type":"ui_spacer","name":"spacer","group":"ac89b4a2.ee6a38","order":2,"width":1,"height":1},{"id":"9bfe3445.482ec8","type":"ui_spacer","name":"spacer","group":"ac89b4a2.ee6a38","order":3,"width":1,"height":1},{"id":"eebff668.1d7ee8","type":"ui_spacer","name":"spacer","group":"ac89b4a2.ee6a38","order":4,"width":1,"height":1},{"id":"4766a265.074efc","type":"ui_group","z":"","name":"Density Dozing Settings","tab":"","order":7,"disp":true,"width":"24","collapse":false},{"id":"55d6d5a.037de2c","type":"ui_spacer","name":"spacer","group":"24ca6449.d3e05c","order":7,"width":6,"height":1},{"id":"66fbc89.a235938","type":"ui_spacer","name":"spacer","group":"24ca6449.d3e05c","order":8,"width":6,"height":1},{"id":"45c98a8e.b0ebf4","type":"ui_spacer","name":"spacer","group":"24ca6449.d3e05c","order":9,"width":6,"height":1},{"id":"daed5f32.bba48","type":"ui_spacer","name":"spacer","group":"24ca6449.d3e05c","order":10,"width":6,"height":1},{"id":"f158ea40.7c98e8","type":"ui_group","z":"","name":"pH","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"b97ce687.952c88","type":"ui_group","z":"","name":"Density","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"183826a1.1fe489","type":"ui_group","name":"CSV download","tab":"","order":8,"disp":true,"width":24,"collapse":false},{"id":"9e996e80.1d648","type":"ui_spacer","name":"spacer","group":"f158ea40.7c98e8","order":3,"width":20,"height":1},{"id":"f2eafce8.a5038","type":"ui_spacer","name":"spacer","group":"b97ce687.952c88","order":3,"width":20,"height":1},{"id":"2864efc4.3b749","type":"ui_group","name":"pH","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"b5dc9c63.d2313","type":"modbus-client","z":"","name":"","clienttype":"serial","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB0","serialType":"RTU-BUFFERD","serialBaudrate":"19200","serialDatabits":"8","serialStopbits":"2","serialParity":"even","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectOnTimeout":true,"reconnectTimeout":"2000","parallelUnitIdsAllowed":true},{"id":"2a18c7f8.770cf8","type":"ui_group","name":"Tower Lamp Status","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"30e12ab1.9bd836","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":2,"width":2,"height":1},{"id":"2d998e2.4b43e72","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":4,"width":10,"height":1},{"id":"8df01980.037448","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":5,"width":2,"height":1},{"id":"5dc333a6.7827dc","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":6,"width":10,"height":1},{"id":"cdb3563b.327678","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":8,"width":2,"height":1},{"id":"3d6c035a.faf18c","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":9,"width":10,"height":1},{"id":"6b399738.623ac8","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":10,"width":2,"height":1},{"id":"4b90ce3c.3f51f","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":11,"width":10,"height":1},{"id":"8ed9095d.51a718","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":13,"width":2,"height":1},{"id":"191e0db9.9632a2","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":14,"width":10,"height":1},{"id":"de432693.2a8ff8","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":15,"width":18,"height":1},{"id":"4045410e.efce3","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":17,"width":18,"height":1},{"id":"1943030f.7113fd","type":"ui_spacer","name":"spacer","group":"2a18c7f8.770cf8","order":18,"width":18,"height":1},{"id":"8eb28daf.db13c","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"f0e182ce.2fade","type":"serial-port","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"bafb7989.959878","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"507b6635.72f538","type":"serial-port","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"1cf40ded.cbd9f2","type":"ui_group","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"e28ef55c.20e288","type":"serial-port","serialport":"/dev/ttyACM0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"30b5ab9e.6da2a4","type":"serial-port","serialport":"/dev/ttyAMA0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"f0912245.639a","type":"ui_group","name":"Machine Details","tab":"","order":1,"disp":true,"width":24,"collapse":true},{"id":"1291c9a6.57aed6","type":"ui_group","name":"CPU TEMPERATURE","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"73976f23.bc541","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"24","collapse":true},{"id":"68aa6813.f151a8","type":"ui_group","name":"Machine Details","tab":"","order":1,"disp":true,"width":"12","collapse":true},{"id":"bdfba14d.cf5c5","type":"ui_group","name":"CPU TEMPERATURE","tab":"","order":3,"disp":true,"width":"24","collapse":false},{"id":"fbb2745d.cbfc88","type":"ui_group","name":"Temperature","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"73e3466b.e17d78","type":"ui_group","name":"Hummidity","tab":"","order":3,"disp":true,"width":"10","collapse":false},{"id":"4775799f.00a9b8","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"7e0d9e95.b968d","type":"ui_group","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"476e56fc.e5ec48","type":"ui_group","z":"","name":"Notification Settings","tab":"2c907297.ff4b2e","order":1,"disp":true,"width":"24","collapse":true},{"id":"206bfa32.eff1f6","type":"ui_group","name":"Machine Details","tab":"","order":1,"disp":true,"width":24,"collapse":true},{"id":"2c907297.ff4b2e","type":"ui_tab","name":"Alert Notification Settings","icon":"fa-address-book","order":2,"disabled":false,"hidden":false},{"id":"b21eba7b.6151e8","type":"ui_spacer","name":"spacer","group":"73e3466b.e17d78","order":3,"width":4,"height":1},{"id":"f42b23d.a72cbe","type":"ui_spacer","name":"spacer","group":"73e3466b.e17d78","order":4,"width":4,"height":1},{"id":"542cb5d3.8d99bc","type":"ui_spacer","name":"spacer","group":"73e3466b.e17d78","order":5,"width":4,"height":1},{"id":"e903bb64.f21e98","type":"ui_spacer","name":"spacer","group":"73e3466b.e17d78","order":6,"width":4,"height":1},{"id":"74ddd394.70293c","type":"ui_spacer","name":"spacer","group":"73e3466b.e17d78","order":7,"width":4,"height":1},{"id":"5575cf92.025d5","type":"ui_group","name":"Tower Lamp Status","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"ca4c2fd7.fdf9f","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":2,"width":2,"height":1},{"id":"cd73daa4.c776b8","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":4,"width":10,"height":1},{"id":"11daac2e.b8db34","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":5,"width":2,"height":1},{"id":"990bd48b.ac8cc8","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":6,"width":10,"height":1},{"id":"ee516acd.125ad8","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":8,"width":2,"height":1},{"id":"1a6a86db.459b89","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":9,"width":10,"height":1},{"id":"8e74d0f5.10192","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":10,"width":2,"height":1},{"id":"2ef8c376.9ec61c","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":11,"width":10,"height":1},{"id":"91f75bdf.9b7808","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":13,"width":2,"height":1},{"id":"c7f95dd6.46a16","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":14,"width":10,"height":1},{"id":"878bf3a3.84314","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":15,"width":18,"height":1},{"id":"685788e.e968478","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":17,"width":18,"height":1},{"id":"e79ce6cd.3cbdd8","type":"ui_spacer","name":"spacer","group":"5575cf92.025d5","order":18,"width":18,"height":1},{"id":"8efd14e0.3af738","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"f5fb9339.3eafe","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"b663f19b.14339","type":"ui_group","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"8eb3f39a.c8adc","type":"ui_group","name":"Machine Details","tab":"","order":1,"disp":true,"width":24,"collapse":true},{"id":"ce2d89ee.2d01b8","type":"ui_group","name":"CPU TEMPERATURE","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"5eb4e8b.e43db18","type":"ui_group","name":"Notification Settings","tab":"","order":1,"disp":true,"width":"15","collapse":true},{"id":"5535293e.91e248","type":"ui_group","name":"Table Maintenance","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"15df468a.ec3339","type":"MySQLdatabase","name":"","host":"127.0.0.1","port":"3306","db":"nw_buffer_db","tz":"","charset":"UTF8"},{"id":"42ea1404.bdcd6c","type":"ui_group","name":"pH","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"a2a1796f.dd7e18","type":"ui_group","name":"Display","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"833d2eec.ab4d4","type":"ui_spacer","name":"spacer","group":"a2a1796f.dd7e18","order":2,"width":16,"height":1},{"id":"a9c7b311.0e214","type":"ui_spacer","name":"spacer","group":"a2a1796f.dd7e18","order":4,"width":24,"height":1},{"id":"9ae1a560.9b79e8","type":"ui_spacer","name":"spacer","group":"206bfa32.eff1f6","order":2,"width":18,"height":1},{"id":"fb4ad390.de6dd","type":"ui_spacer","name":"spacer","group":"206bfa32.eff1f6","order":3,"width":24,"height":1},{"id":"69423ca7.4207d4","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":2,"width":18,"height":1},{"id":"1d7ef802.ffdc08","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":4,"width":9,"height":1},{"id":"5e4d0655.85a4c8","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":5,"width":9,"height":1},{"id":"6e8c1c5c.10fae4","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":6,"width":9,"height":1},{"id":"eda4e7ba.de26a8","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":7,"width":9,"height":1},{"id":"290a5355.1cc7dc","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":8,"width":9,"height":1},{"id":"b69bfce4.b3b8a","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":9,"width":9,"height":1},{"id":"9274b68.476b648","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":10,"width":9,"height":1},{"id":"cf7bd101.30093","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":11,"width":9,"height":1},{"id":"c765d602.aaf918","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":12,"width":9,"height":1},{"id":"8245db15.356a78","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":13,"width":9,"height":1},{"id":"476d4a05.535df4","type":"ui_spacer","name":"spacer","group":"476e56fc.e5ec48","order":14,"width":9,"height":1},{"id":"a6857ce7.addab","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":2,"width":18,"height":1},{"id":"70c0ca69.cde0f4","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":4,"width":18,"height":1},{"id":"c35d082a.6e4e28","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":5,"width":18,"height":1},{"id":"f1ea5084.fdac2","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":6,"width":18,"height":1},{"id":"b2b7d955.2c5038","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":7,"width":18,"height":1},{"id":"1bd6097c.3e9067","type":"ui_spacer","name":"spacer","group":"2bf05bec.224e34","order":9,"width":18,"height":1},{"id":"ddaf14e9.bf71c8","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":3,"width":12,"height":1},{"id":"43bf190c.491008","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":4,"width":12,"height":1},{"id":"d975e88e.f1def8","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":5,"width":12,"height":1},{"id":"42d0b9b0.f13a08","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":6,"width":12,"height":1},{"id":"6f575bea.7536c4","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":7,"width":12,"height":1},{"id":"d5acfdf0.8065e","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":8,"width":12,"height":1},{"id":"dba9bec2.c8e16","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":11,"width":12,"height":1},{"id":"47383e93.33bce","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":15,"width":6,"height":1},{"id":"cc0334a1.59f218","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":16,"width":6,"height":1},{"id":"aedc0e4c.1fa79","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":17,"width":6,"height":1},{"id":"35495aaf.f758a6","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":18,"width":6,"height":1},{"id":"ac84aa6e.76e1e8","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":19,"width":6,"height":1},{"id":"813f8832.6328e8","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":20,"width":6,"height":1},{"id":"5fe2a51.843fb5c","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":24,"width":6,"height":1},{"id":"5a444fbd.b11b2","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":28,"width":6,"height":1},{"id":"d6653b13.e87d28","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":29,"width":6,"height":1},{"id":"4a46698d.846f98","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":30,"width":6,"height":1},{"id":"de505c85.082fd","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":31,"width":6,"height":1},{"id":"d997a29b.2a23b","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":32,"width":6,"height":1},{"id":"5f0aa6b2.3bac48","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":33,"width":6,"height":1},{"id":"41490990.6754e8","type":"ui_spacer","name":"spacer","group":"97f367d3.be02e8","order":37,"width":6,"height":1},{"id":"3f199298.4bc2ce","type":"ui_group","name":"Alerts list","tab":"5380fd75.d97484","order":1,"disp":true,"width":"24","collapse":false},{"id":"d60f6199.c01a8","type":"ui_group","name":"Master Dropdown","tab":"a3b8204c.cc44c","order":1,"disp":true,"width":"24","collapse":false},{"id":"5380fd75.d97484","type":"ui_tab","name":"Alerts","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"a3b8204c.cc44c","type":"ui_tab","name":"Master Dropdown","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"e83fe06f.4f123","type":"ui_group","name":"CSV delay settings","tab":"d9fdf1e2.23bfb","order":1,"disp":true,"width":"24","collapse":false},{"id":"d9fdf1e2.23bfb","type":"ui_tab","name":"CSV Settings","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"86c9e2b3.e63cb","type":"inject","z":"8f4b7b2c.8cafc8","name":"Get strength","topic":"","payload":"","payloadType":"str","repeat":"10","crontab":"","once":true,"onceDelay":"1","x":100,"y":1220,"wires":[["68bd4ead.2ef6b"]]},{"id":"68bd4ead.2ef6b","type":"exec","z":"8f4b7b2c.8cafc8","command":"iwconfig","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"iwconfig","x":280,"y":1200,"wires":[["c8b2244d.c54cb8","a0eb6e02.27be3"],[],[]]},{"id":"c8b2244d.c54cb8","type":"function","z":"8f4b7b2c.8cafc8","name":"Extract signal config","func":"var input, tokens, inet;\ninput = msg.payload;\ntokens = input.split(\" \", 100);\n//node.warn(tokens)\ninet = tokens[94].split(\"=\",2);\n//node.warn(inet)\nglobal.set('Mac',tokens[27])\nglobal.set('Signal',inet[1])\n//node.warn(tokens[27])\n//node.warn(inet[1])\n","outputs":1,"noerr":0,"x":480,"y":1200,"wires":[["a0eb6e02.27be3"]]},{"id":"a0eb6e02.27be3","type":"debug","z":"8f4b7b2c.8cafc8","name":"test out","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":680,"y":1160,"wires":[]},{"id":"679bea20.1d8cb4","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"TimeUpdate","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":80,"y":320,"wires":[["f9f155b6.676928","983737fa.077ce8"]]},{"id":"983737fa.077ce8","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"flow.set('Red',[0,0,0]);\nflow.set('Yellow',[0,0,0]);\nflow.set('Green',[0,0,0]);\nflow.set('Blue',[0,0,0]);\nflow.set('r',0);\nflow.set('y',0);\nflow.set('g',0);\nflow.set('b',0);\nflow.set('TotalInSec',0);\nflow.set('RedState',0);\nflow.set('YellowState',0);\nflow.set('GreenState',0);\nflow.set('BlueState',0);\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":360,"wires":[[]]},{"id":"f9f155b6.676928","type":"tcp out","z":"8f4b7b2c.8cafc8","host":"172.24.155.164","port":"51000","beserver":"client","base64":false,"end":false,"name":"","x":330,"y":300,"wires":[]},{"id":"bd180e60.e2dbc","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"10","x":90,"y":1280,"wires":[["bfe31ec8.d282b"]]},{"id":"bfe31ec8.d282b","type":"file in","z":"8f4b7b2c.8cafc8","name":"machine_name.txt","filename":"/home/pi/Desktop/machine_name.txt","format":"utf8","chunk":false,"sendError":false,"x":270,"y":1280,"wires":[["dd3787bf.bbf4f8"]]},{"id":"dd3787bf.bbf4f8","type":"json","z":"8f4b7b2c.8cafc8","name":"","property":"payload","action":"","pretty":false,"x":430,"y":1280,"wires":[["1b6836f4.5dd579"]]},{"id":"1b6836f4.5dd579","type":"ui_template","z":"8f4b7b2c.8cafc8","group":"8f8cccf3.6c5dc","name":"machine_name Setting","order":1,"width":"10","height":"3","format":"<html>\n    <head>\n        \n    </head>\n    <body>\n     <style>\nbody{\n    background-image : url(\"/background9.jpg\");\n}\n    \n    input[type=text]{\n    \tbackground-color: white;\n    \tcolor : black;\n  border:none;\n \n  padding : 7px;\n    }\n    input[type=submit] {\n  background-color: #4CAF50;\n  color: white;\n  padding: 5px 7px;\n  border: none;\n  border-radius: 1px;\n  cursor: allowed;\n  float: left;\n}\n\ninput[type=submit]:hover {\n  background-color: #45a049;\n}\ntable, tr,th, td {\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\twidth:100%;\n\t\tpadding: 1px\n}\n input[type=number]{\nbackground-color: white;\ncolor : black;\n  border : 1px solid #0093dc;\n  padding : 7px 6px;\n  text-align : center;\n    }\n    th{\n\talign : center;\n\t  color: white;\n\t  font-weight: normal;\n\t  font-family: Candara;\n\t  font-size: 110%;\n\t  background-color: #2a92b5;\n\t  padding : 7px 3px\n\t  }\n</style>\n   \n    \n<div>\n\n\n<div >\n    <form id=\"TableForm\" ng-submit=\"MyTableFormAction()\" >\n        <table id=\"EmptableWithEditDelete\">\n            <tr>\n                <th>\n                    Sr. No.\n                </th>\n                <th>\n                   Machine_name\n                </th>\n                <th>\n                    Edit\n                </th>\n                <th>\n                    Add Record\n                </th>                \n                <th>\n                    Delete\n                </th>\n            </tr>\n            <tr ng-repeat=\"Set in IntMsg.payload.SetData\" >\n                <td disabled=\"true\">\n                    {{$index+1}}\n                </td>\n                <td>\n                    <input type=\"text\" id=\"EmpIDInput{{$index}}\" ng-model=\"Set.Machine_name\"  disabled=\"true\" required><!--ng-model=-->\n                </td>\n                <td>\n                    <button type=\"button\"  ng-click=\"TableFormRowEditBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Edit\n                    </button>\n                        \n                </td>\n                <td>\n                    <button type=\"button\"  ng-click=\"TableFormAddRowBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Add Record\n                    </button>\n                        \n                </td>\n                <td>\n                    <button type=\"button\" ng-click=\"TableFormRowDeleteBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Delete\n                    </button>\n                </td>\n            </tr>\n        </table>\n\n       <button type=\"Submit\" name=\"Submit\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> Submit Data\n       </button>\n       <button type=\"button\" ng-click=\"TableAddFirstRecord()\" ng-style=\"{float: 'left', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> Add Record\n           \n       </button>\n           \n       \n    </form>\n</div>\n</div>\n<script>\n//send({payload:myFunction1()})\n//few learnigs:  if msg.pyload is used to link data to html tags like \n//<input type=\"text\" id=\"EmpId\" name=\"fname\" value={{msg.payload.TSetData.Selectedobj}} disabled > \n//then \n//ensure orginal data variables in msg.payload are intact through out the session/user interaction. \n\n//\"{{angular_var}}\"  syntax is used in html to pass varible data from angular to html tags\n//angular function send({payload:var/funct}) is used to send the msg to node red using ng-click directives. it updates msg.payload of entire template. \n// if your html view tags like input msg/table/dropdowns are getting reset that means\n//while sending msg, orginal msg got disturbed.\n// to solve this issue you can preserve original msg by adding new varibles to orginal msg.payload .\n// this is allowed but you should not disturb incoming msg.payload varibales data structure.\n// i.e say incoming msg.payload had data structure like msg={\"payload\":{\"emp\":employees}}\n//employees=[{\"name\":\"e1\",\"id\":1,\"dept\":\"dept1\",\"div\":\"div1\"},{\"name\":\"e2\",\"id\":2,\"dept\":\"dept2\",\"div\":\"div2\"},{\"name\":\"e3\",\"id\":3,\"dept\":\"dept3\",\"div\":\"div3\"}]\n// in this case you can add msg={\"payload\":{\"emp\":employees},{\"newVar\":newVarData}} this will works as orignal msg.payload.emp is not disturbed and new object \"NewVar is added\"\n// you can chage values of all varibles . that will not create any error or reset of view.\n\n\n// to check node-red ui is working properly , type \"http://127.0.0.1:1880/ui/\" in chrome browser and click\n//on broweser three dots menu-->more tools-->developer tools ensure at riht side of broweser debug window is opend\n// click on Consol tab to see error/status mssages.\n// you can use console.log(\"your_var_name\"); to see the value\n\n  var test=document.getElementById(\"EmpId\");\n\n(function(scope) {\n    // use this func\n    scope.IntMsg={\"payload\":{\"SetData\":[{}]}};\n    \n  scope.$watch('msg', function(msg) {\n    if (msg) {\n      // Do something when msg arrives\n            scope.IntMsg=msg;\n  \n    console.log(msg.payload);\n    }\n    });\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n    //\n    scope.TableFormRowEditBtn=function MyTableFormEditBtn(index){\n        console.log(\"hi\");\n        document.getElementById(\"EmptableWithEditDelete\").rows[index+1].cells[1].getElementsByTagName(\"input\")[0].disabled=false\n    }\n\n\n    scope.TableAddFirstRecord=function MyTableAddFirstRecordBtn(){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n        console.log(\"TableAddFirstRecord clicked\");\n        var dummy={\"Machine_name\":\"\"};\n        scope.IntMsg.payload.SetData.push(dummy);\n    }\n\n\n    scope.TableFormAddRowBtn=function MyTableFormAddRowBtn(index){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n        var dummy={\"Machine_name\":\"\"};\n        scope.IntMsg.payload.SetData.splice(index+1, 0, dummy);\n    }\n    scope.MyTableFormAction= function MyTableFormData(){\n        var i;\n        for (i = 0; i < scope.IntMsg.payload.SetData.length; i++) {\n            document.getElementById(\"EmptableWithEditDelete\").rows[i+1].cells[1].getElementsByTagName(\"input\")[0].disabled=true\n        }\n        \n        console.log(\"MyTableFormData\");\n        console.log(scope.IntMsg.payload.SetData);\n        window.confirm(\"Data Saved\");\n        scope.send({\"payload\":(scope.IntMsg.payload)});\n        \n    }\n    scope.TableFormRowDeleteBtn=function MyTableFormRowDeleteBtn(index){\n        var txt;\n        var r = confirm(\"Press OK to Confim Delete \");\n        if (r == true) {\n            scope.IntMsg.payload.SetData.splice(index,1);\n            scope.MyTableFormAction();\n            console.log([\"TableFormRowDeleteBtn\"],index);\n        }\n        \n\n    }\n    \n})(scope);\n\n\n</script>\n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":600,"y":1280,"wires":[["6fa38554.890adc"]]},{"id":"6fa38554.890adc","type":"file","z":"8f4b7b2c.8cafc8","name":"machine_name.txt","filename":"/home/pi/Desktop/machine_name.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":830,"y":1280,"wires":[["ecb14731.08ec88"]]},{"id":"ecb14731.08ec88","type":"json","z":"8f4b7b2c.8cafc8","name":"","property":"payload","action":"obj","pretty":false,"x":1010,"y":1280,"wires":[["d88506b7.5685b8"]]},{"id":"d88506b7.5685b8","type":"function","z":"8f4b7b2c.8cafc8","name":"machine_name","func":"global.set(\"Isettings\",msg.payload);\nvar Machine_name = msg.payload.SetData[0].Machine_name\nflow.set('Machine_name',Machine_name)\nreturn msg;","outputs":1,"noerr":0,"x":1180,"y":1280,"wires":[["34661a01.701d36"]]},{"id":"34661a01.701d36","type":"debug","z":"8f4b7b2c.8cafc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1190,"y":1220,"wires":[]},{"id":"2b095f90.a9612","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"30","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":640,"wires":[["8b4aae1c.6926f"]]},{"id":"cbadd9a9.b97958","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"msg.payload={'temp':msg.payload.replace(\"temp=\",\"\").replace(\"'C\\n\",\"\")}\nflow.set('CPU_Temp',msg.payload.temp)\nreturn msg","outputs":1,"noerr":0,"x":410,"y":800,"wires":[["ba0c24a0.f9df78","85125f91.85c01","bc8e6fdd.ede47"]]},{"id":"eecffa1c.e748b8","type":"exec","z":"8f4b7b2c.8cafc8","command":"vcgencmd","addpay":false,"append":"measure_temp","useSpawn":"false","timer":"","oldrc":false,"name":"CPU_Temp","x":250,"y":820,"wires":[["cbadd9a9.b97958"],[],[]]},{"id":"49a5e44.ec4491c","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":70,"y":820,"wires":[["eecffa1c.e748b8"]]},{"id":"ba0c24a0.f9df78","type":"ui_gauge","z":"8f4b7b2c.8cafc8","name":"CPU TEMERATURE","group":"7ff8cd14.1c8d84","order":1,"width":"6","height":"6","gtype":"gage","title":"gauge","label":"C","format":"{{payload.temp}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":620,"y":840,"wires":[]},{"id":"b9825a0e.6f7cb8","type":"ui_chart","z":"8f4b7b2c.8cafc8","name":"TEMPERATURE","group":"7ff8cd14.1c8d84","order":2,"width":"18","height":"6","label":"TEMPERATURE","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"30","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":800,"wires":[[]],"inputLabels":["payload.temp"]},{"id":"d65a6fab.d1c76","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"var timestamp= new Date();\nvar time = timestamp.getTime()\nvar date = timestamp.getDate() + \"-\" + (timestamp.getMonth() + 1) + \"-\" + timestamp.getFullYear();\nvar Hr = timestamp.getHours() + \":\" + timestamp.getMinutes();\n\nmsg.payload = date+\",\"+Hr+\",\"+flow.get('CPU_Temp')\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":1000,"wires":[["9bcd7fe8.8f2da","ecb647e5.a89938","5fb2e99d.a56108"]]},{"id":"9bcd7fe8.8f2da","type":"file","z":"8f4b7b2c.8cafc8","name":"Temp.csv","filename":"/home/pi/Desktop/Temp.csv","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":540,"y":980,"wires":[[]]},{"id":"85125f91.85c01","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"msg.payload=msg.payload.temp\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":800,"wires":[["b9825a0e.6f7cb8"]]},{"id":"d7bc7d92.eee8c","type":"ui_template","z":"8f4b7b2c.8cafc8","group":"7ff8cd14.1c8d84","name":"Download csv","order":3,"width":"5","height":"1","format":"<!DOCTYPE html>\n<html>\n<body>\n    \n<md-button ng-style=\"{background: '#ed89d7', \n                      color:'black',\n                      padding: '10px',\n                      cursor: 'allowed'\n                      \n                      }\"\n\n    ng-click href=\"{{msg.payload}}\"\n>\n<i class=\"fa fa-download\"></i>\nDownload Temp.csv\n</md-button>\n</body>\n</html>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":420,"y":900,"wires":[[]]},{"id":"d2a0e700.4b37d8","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"600","crontab":"","once":true,"onceDelay":"0.0","x":90,"y":1000,"wires":[["d65a6fab.d1c76"]]},{"id":"4efb004.e160a","type":"fs-ops-delete","z":"8f4b7b2c.8cafc8","name":"Delete Temp.csv","path":"","pathType":"str","filename":"/home/pi/Desktop/Temp.csv","filenameType":"str","x":260,"y":1060,"wires":[["541d6835.d2d348"]]},{"id":"4a618739.1314a8","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":80,"y":1060,"wires":[["4efb004.e160a"]]},{"id":"541d6835.d2d348","type":"debug","z":"8f4b7b2c.8cafc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":430,"y":1060,"wires":[]},{"id":"ecb647e5.a89938","type":"debug","z":"8f4b7b2c.8cafc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":1000,"wires":[]},{"id":"5fb2e99d.a56108","type":"file","z":"8f4b7b2c.8cafc8","name":"Temp.txt","filename":"/home/pi/Desktop/Temp.txt","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":540,"y":940,"wires":[[]]},{"id":"1fd1350f.59a56b","type":"exec","z":"8f4b7b2c.8cafc8","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"reboot","x":250,"y":1340,"wires":[[],[],[]]},{"id":"b95381f2.a7a72","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":80,"y":1340,"wires":[["1fd1350f.59a56b"]]},{"id":"17e17563.af446b","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"var ip=global.get('IP_Address')\nmsg.payload=\"http://\"+ip+\":1880/Temp.csv\";\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":900,"wires":[["d7bc7d92.eee8c"]]},{"id":"4c22d1c5.d4c14","type":"inject","z":"8f4b7b2c.8cafc8","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":70,"y":920,"wires":[["17e17563.af446b"]]},{"id":"341426e0.7b4aea","type":"exec","z":"8f4b7b2c.8cafc8","command":"sudo date -s ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"set time","x":360,"y":1400,"wires":[["9dd36ecd.00759"],["9dd36ecd.00759"],["9dd36ecd.00759"]]},{"id":"cf88116f.ae2cb","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"if(flow.get('SetTime')==1)\n{\n    flow.set('SetTime',0)\n    return msg;   \n}\n","outputs":1,"noerr":0,"x":210,"y":1400,"wires":[["341426e0.7b4aea"]]},{"id":"9dd36ecd.00759","type":"debug","z":"8f4b7b2c.8cafc8","name":"Time","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":530,"y":1400,"wires":[]},{"id":"bc8e6fdd.ede47","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"msg.payload.IP=global.get('IP_Address')\nmsg.payload.Cluster=\"C2\"\nvar timestamp= new Date();\n//var time = timestamp.getTime()\nvar time =  new Date().toLocaleString()\nmsg.payload.time=time\nmsg.payload.Signal=global.get('Signal')\nmsg.payload.Mac=global.get('Mac')\nreturn msg","outputs":1,"noerr":0,"x":570,"y":740,"wires":[["efb5e95d.30d138"]]},{"id":"fdabe5b9.f03c68","type":"debug","z":"8f4b7b2c.8cafc8","name":"Connectivity","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":870,"y":700,"wires":[]},{"id":"efb5e95d.30d138","type":"json","z":"8f4b7b2c.8cafc8","name":"","property":"payload","action":"","pretty":false,"x":710,"y":740,"wires":[["fdabe5b9.f03c68","b557fb4e.dea538"]]},{"id":"b557fb4e.dea538","type":"tcp out","z":"8f4b7b2c.8cafc8","host":"172.24.155.165","port":"5000","beserver":"client","base64":false,"end":false,"name":"","x":930,"y":740,"wires":[]},{"id":"33e72ed2.d63c02","type":"tcp in","z":"8f4b7b2c.8cafc8","name":"","server":"server","host":"","port":"3001","datamode":"stream","datatype":"utf8","newline":"","topic":"","base64":false,"x":60,"y":1400,"wires":[["cf88116f.ae2cb"]]},{"id":"8b4aae1c.6926f","type":"function","z":"8f4b7b2c.8cafc8","name":"","func":"flow.set('SetTime',1)\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":660,"wires":[[]]},{"id":"18b10f41.20f6e1","type":"tcp in","z":"8f4b7b2c.8cafc8","name":"","server":"server","host":"","port":"51000","datamode":"stream","datatype":"buffer","newline":"","topic":"","base64":false,"x":100,"y":500,"wires":[["a2580a63.a56d78","54a077dd.3dbec8"]]},{"id":"a2580a63.a56d78","type":"debug","z":"8f4b7b2c.8cafc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":330,"y":420,"wires":[]},{"id":"54a077dd.3dbec8","type":"exec","z":"8f4b7b2c.8cafc8","command":"sudo date -s ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":410,"y":540,"wires":[["8fd1f0f2.c41a5"],[],[]]},{"id":"8fd1f0f2.c41a5","type":"debug","z":"8f4b7b2c.8cafc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":530,"y":480,"wires":[]},{"id":"f51ba05c.df7a3","type":"inject","z":"8f4b7b2c.8cafc8","name":"get Panel IP","topic":"Node-Red IP Address","payload":"eth0","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"5","x":90,"y":1480,"wires":[["3c4d588d.d21d98"]]},{"id":"3c4d588d.d21d98","type":"exec","z":"8f4b7b2c.8cafc8","command":"ifconfig","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"ifconfig","x":260,"y":1480,"wires":[["2c15598.2cd26a6"],[],[]]},{"id":"2c15598.2cd26a6","type":"function","z":"8f4b7b2c.8cafc8","name":"Extract network config","func":"var input, tokens, inet;\ninput = msg.payload;\ntokens = input.split(\":\", 11);\n//node.warn(tokens)\ninet = tokens[10].split(\" \", 40);\n//node.warn(inet)\nglobal.set('IP_Address',inet[13])\n//node.warn(inet[13])\n","outputs":1,"noerr":0,"x":460,"y":1480,"wires":[["960a5351.7677c"]]},{"id":"960a5351.7677c","type":"debug","z":"8f4b7b2c.8cafc8","name":"test out","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":640,"y":1480,"wires":[]},{"id":"a7fcde3.fbfad2","type":"serial in","z":"974f83a0.4973a","name":"","serial":"a1f0b91d.edac28","x":120,"y":940,"wires":[["6a235e8c.a99c2"]]},{"id":"6a235e8c.a99c2","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":290,"y":940,"wires":[["421dfaa2.300e34","68cc8bd6.1d0974"]]},{"id":"8870c38c.f9125","type":"function","z":"974f83a0.4973a","name":"S1 - pH","func":"var s10=msg.payload.data[0];\nvar Voltage =s10 *((5.0 /1024.0))*1000; //voltage in mV\nvar pHValue = []\nvar slope = []\nvar intercept = []\nvar offset = flow.get(\"offset\")\nvar SuccessReqPrev = flow.get(\"SuccessReq\")\nvar TankName = flow.get(\"TankName\")\nvar NutralVolt = flow.get(\"NutralVolt\")\nvar AcidVolt = flow.get(\"AcidVolt\")\nvar LastCalib7 = flow.get(\"LastCalib7\")\nvar LastCalib4 = flow.get(\"LastCalib4\")\n\n//substracting offset from raw value. (offset is calculated in calibration module)\nslope= (7.0-4.0)/((NutralVolt-1500.0)/3 - (AcidVolt-1500)/3)\nintercept = 7.0 - slope*(NutralVolt-1500.0)/3\npHValue = slope * ((Voltage - 1500.0)/3) + intercept\n\n//Setting the pHValues within flow\nglobal.set(\"pHValue\",pHValue.toFixed(2))\nglobal.set(\"sensorData[0]\",pHValue.toFixed(2))\n//node.warn(flow.get(\"pHValue\"))\n\nmsg.label = global.get(\"Parameter[0]\")\nmsg.value = pHValue.toFixed(2)\n//node.warn(msg.value)\n\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":940,"wires":[["6936ad6.8ce8a54"]]},{"id":"f9b26beb.3a5ef8","type":"file in","z":"974f83a0.4973a","name":"pHRef.txt","filename":"/home/pi/Desktop/pHRef.txt","format":"utf8","chunk":false,"sendError":false,"x":320,"y":120,"wires":[["6b86849e.f039bc"]]},{"id":"116d48fd.64b8f7","type":"inject","z":"974f83a0.4973a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":120,"wires":[["f9b26beb.3a5ef8"]]},{"id":"6b86849e.f039bc","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":470,"y":120,"wires":[["b61c4db8.cb6c9"]]},{"id":"b61c4db8.cb6c9","type":"function","z":"974f83a0.4973a","name":"var init","func":"flow.set(\"pHValue\",0)\nflow.set(\"Voltage\",0)\nflow.set(\"TankName\",\"pH\")\nflow.set(\"NutralVolt\",msg.payload.NutralVolt)\nflow.set(\"AcidVolt\",msg.payload.AcidVolt)\nflow.set(\"LastCalib4\",msg.payload.LastCalib4)\nflow.set(\"LastCalib7\",msg.payload.LastCalib7)","outputs":1,"noerr":0,"x":630,"y":120,"wires":[[]]},{"id":"cccfba3.9febc48","type":"comment","z":"974f83a0.4973a","name":"Module 4 ( 7 ph Calibration input ) ","info":"","x":200,"y":220,"wires":[]},{"id":"9feef04a.dc478","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1130,"y":280,"wires":[]},{"id":"d619cc8a.a103d","type":"file","z":"974f83a0.4973a","name":"7phInput","filename":"/home/pi/Desktop/7phInput.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":920,"y":280,"wires":[["9feef04a.dc478"]]},{"id":"b1ce77f0.c11178","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":490,"y":280,"wires":[["87ac5b6d.a9f9f8"]]},{"id":"654ec805.cd32a8","type":"file in","z":"974f83a0.4973a","name":"7phInput","filename":"/home/pi/Desktop/7phInput.txt","format":"utf8","chunk":false,"sendError":false,"x":320,"y":280,"wires":[["b1ce77f0.c11178"]]},{"id":"aeb188f4.b40928","type":"inject","z":"974f83a0.4973a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"2","x":150,"y":280,"wires":[["654ec805.cd32a8"]]},{"id":"8b9a8081.3fb0c","type":"switch","z":"974f83a0.4973a","name":"","property":"Type","propertyType":"msg","rules":[{"t":"eq","v":"Submit","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":340,"wires":[["4499f748.b72768"]]},{"id":"4a5f82df.9ed0ac","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1250,"y":340,"wires":[]},{"id":"a7f744cc.bc5578","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1110,"y":520,"wires":[]},{"id":"c441dc4.cd1632","type":"file","z":"974f83a0.4973a","name":"4phInput","filename":"/home/pi/Desktop/4phInput.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":940,"y":520,"wires":[["a7f744cc.bc5578"]]},{"id":"1f1c716a.3fdeff","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":470,"y":520,"wires":[["60c83f31.93cac"]]},{"id":"e371bbe0.704c08","type":"file in","z":"974f83a0.4973a","name":"4phInput","filename":"/home/pi/Desktop/4phInput.txt","format":"utf8","chunk":false,"sendError":false,"x":320,"y":520,"wires":[["1f1c716a.3fdeff"]]},{"id":"4e2ac165.40c1","type":"inject","z":"974f83a0.4973a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"2","x":150,"y":520,"wires":[["e371bbe0.704c08"]]},{"id":"7f1e51a5.0bdce","type":"switch","z":"974f83a0.4973a","name":"","property":"Type","propertyType":"msg","rules":[{"t":"eq","v":"Submit","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":580,"wires":[["727edbed.ab7154"]]},{"id":"87ac5b6d.a9f9f8","type":"ui_template","z":"974f83a0.4973a","group":"5b9c82d4.c490cc","name":"7 pH calibration input","order":1,"width":12,"height":2,"format":"<html>\n<body>\n<style>\n\n</style>  \n<form id=\"MobileNoForm\" ng-submit=\"submitlist()\" ng-repeat=\"Details in recipients\" align=\"justify\">\n 7pH calibration&nbsp; &nbsp; &ensp;\n\n<input type=\"submit\" class=\"btn btn-primary\" value=\"7pH Calibrate\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"/>\n</form>\n<script>\n\t(function(scope) {   \t\n  scope.$watch('msg', function(msg) {\n    if (msg) {\n    \t\n      $(\"#my_\"+scope.$id).html(msg.payload);\nscope.data = angular.copy(msg.payload); \n    }\nscope.recipients = angular.copy(scope.data);\n    \n  });\n\nscope.enabledEdit = [];\t\n//scope.data = [{ Name:\"\"}]; \n//scope.recipients = angular.copy(scope.data);\n\t  \nscope.submitlist = function(){\nvar msg={\"payload\":(scope.recipients),\"Type\":\"Submit\"};\nscope.send(msg);\nwindow.confirm(\"Sensor Calibrated for 7 pH\");\nconsole.log(\"form submitted:\"+angular.toJson(scope.recipients));\n\n}\n})(scope);\n</script>            \n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":680,"y":280,"wires":[["8b9a8081.3fb0c","d619cc8a.a103d"]]},{"id":"60c83f31.93cac","type":"ui_template","z":"974f83a0.4973a","group":"21ac8585.16698a","name":"4 ph Calibration input","order":1,"width":12,"height":2,"format":"<html>\n<body>\n<style>\n\n</style>  \n<form id=\"MobileNoForm\" ng-submit=\"submitlist()\" ng-repeat=\"Details in recipients\" align=\"justify\">\n 4pH calibration&nbsp; &nbsp; &ensp;\n\n\n<input type=\"submit\" class=\"btn btn-primary\" value=\"4pH Calibrate\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"/>\n</form>\n<script>\n\t(function(scope) {   \t\n  scope.$watch('msg', function(msg) {\n    if (msg) {\n    \t\n      $(\"#my_\"+scope.$id).html(msg.payload);\nscope.data = angular.copy(msg.payload); \n    }\nscope.recipients = angular.copy(scope.data);\n    \n  });\n\nscope.enabledEdit = [];\t\n//scope.data = [{ Name:\"\"}]; \n//scope.recipients = angular.copy(scope.data);\n\t  \nscope.submitlist = function(){\nvar msg={\"payload\":(scope.recipients),\"Type\":\"Submit\"};\nscope.send(msg);\nwindow.confirm(\"Sensor calibrated for 4pH\");\nconsole.log(\"form submitted:\"+angular.toJson(scope.recipients));\n\n}\n})(scope);\n</script>            \n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":680,"y":520,"wires":[["7f1e51a5.0bdce","c441dc4.cd1632"]]},{"id":"4499f748.b72768","type":"function","z":"974f83a0.4973a","name":"Setting Nutral Voltage Referance","func":" var offset = flow.get(\"offset\")\n var pHValue = flow.get(\"pHValue\")\n var Voltage = flow.get(\"Voltage\")\n var SuccessReq = flow.get(\"SuccessReq\")\n var NutralVolt = flow.get(\"NutralVolt\")\n var AcidVolt = flow.get(\"AcidVolt\")\n var LastCalib7 = flow.get(\"LastCalib7\")\n var LastCalib4 = flow.get(\"LastCalib4\")\n var time = new Date();\n var Datetime = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n var msg2 ={payload:{NutralVolt:NutralVolt ,AcidVolt:AcidVolt,LastCalib7:LastCalib7,LastCalib4:LastCalib4}}\n\nNutralVolt = Voltage\nLastCalib7 = Datetime\nflow.set(\"NutralVolt\",NutralVolt)\nflow.set(\"LastCalib7\",LastCalib7)\nmsg2.payload.NutralVolt = NutralVolt\nmsg2.payload.AcidVolt = AcidVolt\nmsg2.payload.LastCalib7 = LastCalib7\nmsg2.payload.LastCalib4 = LastCalib4\nreturn msg2;","outputs":1,"noerr":0,"x":1000,"y":340,"wires":[["b3f17f81.1f6cc","4a5f82df.9ed0ac"]]},{"id":"37011e27.6a87b2","type":"file","z":"974f83a0.4973a","name":"pHRef.txt","filename":"/home/pi/Desktop/pHRef.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1220,"y":620,"wires":[[]]},{"id":"b3f17f81.1f6cc","type":"file","z":"974f83a0.4973a","name":"pHRef.txt","filename":"/home/pi/Desktop/pHRef.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1240,"y":380,"wires":[[]]},{"id":"727edbed.ab7154","type":"function","z":"974f83a0.4973a","name":"Setting Acid Voltage Referance","func":" //4 ph calibration\n\nvar offset = flow.get(\"offset\")\nvar pHValue = flow.get(\"pHValue\")\nvar Voltage = flow.get(\"Voltage\")\nvar SuccessReq = flow.get(\"SuccessReq\")\nvar slope  = flow.get(\"slope\")\nvar intercept = flow.get(\"intercept\")\nvar NutralVolt = flow.get(\"NutralVolt\")\nvar AcidVolt = flow.get(\"AcidVolt\")\nvar LastCalib7 = flow.get(\"LastCalib7\")\nvar LastCalib4 = flow.get(\"LastCalib4\")\nvar time = new Date();\nvar Datetime = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\nvar msg2 ={payload:{NutralVolt:NutralVolt ,AcidVolt:AcidVolt,LastCalib7:LastCalib7,LastCalib4:LastCalib4}}\nAcidVolt= Voltage\nLastCalib4 = Datetime\n\nflow.set(\"AcidVolt\",AcidVolt)\nflow.set(\"LastCalib4\",LastCalib4)\nmsg2.payload.NutralVolt = NutralVolt\nmsg2.payload.AcidVolt = AcidVolt\nmsg2.payload.LastCalib4 = LastCalib4\nmsg2.payload.LastCalib7 = LastCalib7\nreturn msg2;","outputs":1,"noerr":0,"x":990,"y":580,"wires":[["37011e27.6a87b2","96cba047.83746"]]},{"id":"6dbe2558.f605ac","type":"comment","z":"974f83a0.4973a","name":"Module 6 ( Clear all Calibration ) ","info":"","x":190,"y":660,"wires":[]},{"id":"d8f8ff8e.97248","type":"comment","z":"974f83a0.4973a","name":"Module 5 ( 4 ph Calibration input) ","info":"","x":190,"y":460,"wires":[]},{"id":"96cba047.83746","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1210,"y":580,"wires":[]},{"id":"fe5e1f60.dc71","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1110,"y":740,"wires":[]},{"id":"ad619b8c.3ac018","type":"file","z":"974f83a0.4973a","name":"Clear","filename":"/home/pi/Desktop/Clear.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":930,"y":740,"wires":[["fe5e1f60.dc71"]]},{"id":"15b9be8d.f66de1","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":470,"y":740,"wires":[["a87ae8bf.d7e7b8"]]},{"id":"94ed5658.d57108","type":"file in","z":"974f83a0.4973a","name":"Clear","filename":"/home/pi/Desktop/Clear.txt","format":"utf8","chunk":false,"sendError":false,"x":310,"y":740,"wires":[["15b9be8d.f66de1"]]},{"id":"fa40e8f6.2e4068","type":"inject","z":"974f83a0.4973a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":740,"wires":[["94ed5658.d57108"]]},{"id":"dfa4ac7.a18bb5","type":"switch","z":"974f83a0.4973a","name":"","property":"Type","propertyType":"msg","rules":[{"t":"eq","v":"Submit","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":800,"wires":[["2628fb08.29ee24"]]},{"id":"a87ae8bf.d7e7b8","type":"ui_template","z":"974f83a0.4973a","group":"ddf2e74f.a7c728","name":"Clear Calibration input","order":1,"width":11,"height":3,"format":"<html>\n<body>\n<style>\n\n</style>  \n<form id=\"MobileNoForm\" ng-submit=\"submitlist()\" ng-repeat=\"Details in recipients\" align=\"justify\">\nclear calibration&nbsp; &nbsp; &ensp;\n\n\n<input type=\"submit\" class=\"btn btn-primary\" value=\"Clear\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"/>\n</form>\n<script>\n\t(function(scope) {   \t\n  scope.$watch('msg', function(msg) {\n    if (msg) {\n    \t\n      $(\"#my_\"+scope.$id).html(msg.payload);\n//scope.data = angular.copy(msg.payload); \n    }\n//scope.recipients = angular.copy(scope.data);\n    \n  });\n\nscope.enabledEdit = [];\t\nscope.data = [{ Name:\"\"}]; \nscope.recipients = angular.copy(scope.data);\n\t  \nscope.submitlist = function(){\nvar msg={\"payload\":(scope.recipients),\"Type\":\"Submit\"};\nscope.send(msg);\nwindow.confirm(\"Calibration cleared for selected sensor\");\nconsole.log(\"form submitted:\"+angular.toJson(scope.recipients));\n\n}\n})(scope);\n</script>            \n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":680,"y":740,"wires":[["dfa4ac7.a18bb5","ad619b8c.3ac018"]]},{"id":"2628fb08.29ee24","type":"function","z":"974f83a0.4973a","name":"Clear Voltage Referance","func":"\n var offset = flow.get(\"offset\")\n var pHValue = flow.get(\"pHValue\")\n var Voltage = flow.get(\"Voltage\")\n var SuccessReq = flow.get(\"SuccessReq\")\n var slope  = flow.get(\"slope\")\n var intercept = flow.get(\"intercept\")\n var NutralVolt = flow.get(\"NutralVolt\")\n var AcidVolt = flow.get(\"AcidVolt\")\n  var LastCalib7 = flow.get(\"LastCalib7\")\n  var LastCalib4 = flow.get(\"LastCalib4\")\n  var time = new Date();\nvar Datetime = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n var msg2 ={payload:{NutralVolt:NutralVolt ,AcidVolt:AcidVolt,LastCalib7:LastCalib7,LastCalib4:LastCalib4}}\n\n         AcidVolt = 2032.44\n         NutralVolt = 1500.0\n         LastCalib4 = NaN\n         LastCalib7 = NaN\n\nflow.set(\"AcidVolt\",AcidVolt)\nflow.set(\"NutralVolt\",NutralVolt)\nflow.set(\"LastCalib4\",LastCalib4)\nflow.set(\"LastCalib7\",LastCalib7)\nmsg2.payload.NutralVolt = NutralVolt\nmsg2.payload.AcidVolt = AcidVolt\nmsg2.payload.LastCalib4 = LastCalib4\nmsg2.payload.LastCalib7 = LastCalib7\nreturn msg2;","outputs":1,"noerr":0,"x":970,"y":800,"wires":[["5b8294c7.0c46dc","1e999722.78edd9"]]},{"id":"1e999722.78edd9","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1210,"y":800,"wires":[]},{"id":"5b8294c7.0c46dc","type":"file","z":"974f83a0.4973a","name":"pHRef.txt","filename":"/home/pi/Desktop/pHRef.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1220,"y":840,"wires":[[]]},{"id":"a7e68f73.5c145","type":"comment","z":"974f83a0.4973a","name":"Setting pH flow variables","info":"","x":170,"y":80,"wires":[]},{"id":"421dfaa2.300e34","type":"switch","z":"974f83a0.4973a","name":"","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":940,"wires":[["8870c38c.f9125","619e6ff.82b5e9","ec061ce7.80844"],["11719670.de662a","2fbfa12b.8ad71e","1881d5ff.b126aa","42247980.0a6568","56a933cb.54c44c","8cd138d6.1c1f18"]]},{"id":"11719670.de662a","type":"function","z":"974f83a0.4973a","name":"V R Phase","func":"msg.label = \"V R Phase\"\nmsg.payload = msg.payload.data[0]\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1120,"wires":[["6e131fef.1bbee"]]},{"id":"619e6ff.82b5e9","type":"function","z":"974f83a0.4973a","name":"S1 - Temperature","func":"msg.label = \"Panel Temperature\"\nmsg.value = msg.payload.data[1]\nglobal.set(\"Machine1Temp\", msg.payload.data[1].toFixed(2))\nglobal.set(\"sensorData[1]\", msg.payload.data[1].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1000,"wires":[["724cdfdf.9278b"]]},{"id":"ec061ce7.80844","type":"function","z":"974f83a0.4973a","name":"S1 - Humidity","func":"msg.label = \"Panel Humidity\"\nmsg.value = msg.payload.data[2]\nglobal.set(\"Machine1Humidity\", msg.payload.data[2].toFixed(2))\nglobal.set(\"sensorData[2]\", msg.payload.data[2].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1060,"wires":[["cf9a7e42.8f73c"]]},{"id":"6936ad6.8ce8a54","type":"ui_gauge","z":"974f83a0.4973a","name":"pH","group":"2bf05bec.224e34","order":3,"width":6,"height":4,"gtype":"gage","title":"{{msg.label}}","label":"pH","format":"{{msg.value}}","min":0,"max":"14","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":890,"y":940,"wires":[]},{"id":"724cdfdf.9278b","type":"ui_gauge","z":"974f83a0.4973a","name":"Temperature","group":"97f367d3.be02e8","order":1,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"°C","format":"{{msg.value}}","min":0,"max":"200","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":910,"y":1000,"wires":[]},{"id":"cf9a7e42.8f73c","type":"ui_gauge","z":"974f83a0.4973a","name":"humidity","group":"97f367d3.be02e8","order":2,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"RH","format":"{{msg.value}}","min":0,"max":"200","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":900,"y":1060,"wires":[]},{"id":"b761861.f5ed678","type":"ui_gauge","z":"974f83a0.4973a","name":"V R Phase","group":"97f367d3.be02e8","order":12,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"V","format":"{{msg.value}}","min":0,"max":"400","colors":["#ca3838","#00b500","#ca3838"],"seg1":"210","seg2":"250","x":1390,"y":1120,"wires":[]},{"id":"2fbfa12b.8ad71e","type":"function","z":"974f83a0.4973a","name":"A1","func":"msg.label = \"A1\"\nmsg.payload = msg.payload.data[3]\n//flow.set(\"Machine1A1\", msg.payload.data[1].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1300,"wires":[["956b0aab.9dd2e8"]]},{"id":"de65a111.4a632","type":"ui_gauge","z":"974f83a0.4973a","name":"A1","group":"97f367d3.be02e8","order":25,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"A","format":"{{msg.value}}","min":0,"max":"25","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1370,"y":1300,"wires":[]},{"id":"dcf71edd.8b366","type":"comment","z":"974f83a0.4973a","name":"Asset: Unit 1 (172.24.155.139)","info":"","x":180,"y":3120,"wires":[]},{"id":"86c24184.f0f3e","type":"tcp in","z":"974f83a0.4973a","name":"","server":"server","host":"","port":"6900","datamode":"stream","datatype":"utf8","newline":"","topic":"","base64":false,"x":120,"y":3160,"wires":[["d8916f05.6fa95"]]},{"id":"d8916f05.6fa95","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":280,"y":3160,"wires":[["88f88dad.ce1fd"]]},{"id":"88f88dad.ce1fd","type":"function","z":"974f83a0.4973a","name":"","func":"var averageXaxis = msg.payload.averageXaxis;\nvar averageYaxis = msg.payload.averageYaxis;\nvar averageZaxis = msg.payload.averageZaxis;\nvar XaxisSD = msg.payload.XaxisSD;\nvar YaxisSD = msg.payload.YaxisSD;\nvar ZaxisSD = msg.payload.ZaxisSD;\n\nmsg.payload={\"averageXaxis\":averageXaxis,\"averageYaxis\":averageYaxis,\"averageZaxis\":averageZaxis,\"XaxisSD\":XaxisSD,\"YaxisSD\":YaxisSD,\"ZaxisSD\":ZaxisSD,\"Asset\":\"Unit 1\"};\n\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":3160,"wires":[["c6bf648.11a7b98","a18d9a16.532a68","97137e76.53767","7c7c8a96.486ea4","49f87345.e5eb9c","5469eac4.85a994"]]},{"id":"a71c65ef.444238","type":"ui_template","z":"974f83a0.4973a","group":"18d2f718.e93609","name":"Unit 1 UI","order":1,"width":12,"height":1,"format":"<!DOCTYPE html>\n<html>\n<body>\n    <style>\n    body\n    {\n        background-image : url(\"/background10.jpg\");\n    }\n    </style>   \n<md-button ng-style=\"{background: '#54e1d3', \n                      color:'black',\n                      padding: '10px',\n                      cursor: 'allowed'}\"\n\nng-click href=\"http://172.24.155.139:1880/ui\">\n<i class=\"fa fa-cogs\"></i>\nUnit 1 Setting\n</md-button>\n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":600,"y":3100,"wires":[[]]},{"id":"c6bf648.11a7b98","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":4,"width":6,"height":2,"name":"","label":"X axis Average","format":"{{msg.payload.averageXaxis}}","layout":"col-center","x":620,"y":3160,"wires":[]},{"id":"a18d9a16.532a68","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":6,"width":6,"height":2,"name":"","label":"Y axis Average","format":"{{msg.payload.averageYaxis}}","layout":"col-center","x":620,"y":3220,"wires":[]},{"id":"97137e76.53767","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":8,"width":6,"height":2,"name":"","label":"Z axis Average","format":"{{msg.payload.averageZaxis}}","layout":"col-center","x":620,"y":3280,"wires":[]},{"id":"7c7c8a96.486ea4","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":5,"width":6,"height":2,"name":"","label":"X axis SD","format":"{{msg.payload.XaxisSD}}","layout":"col-center","x":600,"y":3340,"wires":[]},{"id":"49f87345.e5eb9c","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":7,"width":6,"height":2,"name":"","label":"Y axis SD","format":"{{msg.payload.YaxisSD}}","layout":"col-center","x":600,"y":3400,"wires":[]},{"id":"5469eac4.85a994","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":9,"width":6,"height":2,"name":"","label":"Z axis SD","format":"{{msg.payload.XaxisSD}}","layout":"col-center","x":600,"y":3460,"wires":[]},{"id":"9fca4705.17d668","type":"comment","z":"974f83a0.4973a","name":"Paste this in vibration slave","info":"","x":910,"y":3100,"wires":[]},{"id":"4264d514.4bd56c","type":"json","z":"974f83a0.4973a","name":"","property":"payload","action":"","pretty":false,"x":1030,"y":3160,"wires":[["4192df39.36b4f"]]},{"id":"4192df39.36b4f","type":"tcp out","z":"974f83a0.4973a","host":"172.24.155.171","port":"6900","beserver":"client","base64":false,"end":false,"name":"","x":1230,"y":3160,"wires":[]},{"id":"67f69ec8.99337","type":"function","z":"974f83a0.4973a","name":"","func":"var averageXaxis = msg.payload.averageXaxis;\nvar averageYaxis = msg.payload.averageYaxis;\nvar averageZaxis = msg.payload.averageZaxis;\nvar XaxisSD = msg.payload.XaxisSD;\nvar YaxisSD = msg.payload.YaxisSD;\nvar ZaxisSD = msg.payload.ZaxisSD;\n\nmsg.payload={\"averageXaxis\":averageXaxis,\"averageYaxis\":averageYaxis,\"averageZaxis\":averageZaxis,\"XaxisSD\":XaxisSD,\"YaxisSD\":YaxisSD,\"ZaxisSD\":ZaxisSD,\"Asset\":\"X Axis\"};\n\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":3160,"wires":[["4264d514.4bd56c"]]},{"id":"a29e010a.5209a","type":"ping","z":"974f83a0.4973a","mode":null,"name":"","host":"172.24.155.139","timer":"20","inputs":0,"x":140,"y":3540,"wires":[["b3922cee.42113"]]},{"id":"b3922cee.42113","type":"function","z":"974f83a0.4973a","name":"","func":"var IP=msg.topic;\nif(msg.payload===false)\n{\n    msg.payload=\"Disconnected\";\n}\nelse\n{\n     msg.payload=\"Connected\";\n}\nvar msg2 = {};\nvar time_1 = new Date();\nvar time = time_1.getTime()\n\nmsg2.payload = \"   Date : \"+new Date(time).toLocaleString() \n\nreturn [msg,msg2];\n","outputs":2,"noerr":0,"x":360,"y":3540,"wires":[["970df10c.6c9a9"],["72f616ad.60bc28"]]},{"id":"970df10c.6c9a9","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":2,"width":6,"height":2,"name":"","label":"Status :","format":"{{msg.payload}}","layout":"col-center","x":600,"y":3520,"wires":[]},{"id":"72f616ad.60bc28","type":"ui_text","z":"974f83a0.4973a","group":"18d2f718.e93609","order":3,"width":6,"height":2,"name":"","label":"Last Updated : ","format":"{{msg.payload}}","layout":"col-center","x":620,"y":3580,"wires":[]},{"id":"e5ec41fe.b5b9a","type":"comment","z":"974f83a0.4973a","name":"VIBRATION DASHBOARD","info":"","x":170,"y":3060,"wires":[]},{"id":"be983f57.47ae3","type":"inject","z":"974f83a0.4973a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"1","x":1730,"y":140,"wires":[["f8ada55f.526468"]]},{"id":"448ae78a.893208","type":"comment","z":"974f83a0.4973a","name":"running modbusMaster.py on startup","info":"","x":1780,"y":80,"wires":[]},{"id":"f8ada55f.526468","type":"exec","z":"974f83a0.4973a","command":"python /home/pi/Desktop/modbusMaster.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":2010,"y":140,"wires":[["22fc0fdf.a7e83"],["22fc0fdf.a7e83"],["22fc0fdf.a7e83"]]},{"id":"22fc0fdf.a7e83","type":"debug","z":"974f83a0.4973a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2330,"y":140,"wires":[]},{"id":"1881d5ff.b126aa","type":"function","z":"974f83a0.4973a","name":"V Y Phase","func":"msg.label = \"V Y Phase\"\nmsg.payload = msg.payload.data[1]\n//flow.set(\"Machine1V23\", msg.payload.data[0].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1180,"wires":[["ffd70cc2.acaf5"]]},{"id":"8cd138d6.1c1f18","type":"function","z":"974f83a0.4973a","name":"V B Phase","func":"msg.label = \"V B Phase\"\nmsg.payload = msg.payload.data[2]\n//flow.set(\"Machine1V31\", msg.payload.data[0].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1240,"wires":[["98911afe.df6738"]]},{"id":"42247980.0a6568","type":"function","z":"974f83a0.4973a","name":"A2","func":"msg.label = \"A2\"\nmsg.payload = msg.payload.data[4]\n//flow.set(\"Machine1A2\", msg.payload.data[1].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1360,"wires":[["45a3e21e.e7591c"]]},{"id":"f1d8a5b0.cdf338","type":"ui_gauge","z":"974f83a0.4973a","name":"A2","group":"97f367d3.be02e8","order":26,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"A","format":"{{msg.value}}","min":0,"max":"25","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1370,"y":1360,"wires":[]},{"id":"56a933cb.54c44c","type":"function","z":"974f83a0.4973a","name":"A3","func":"msg.label = \"A3\"\nmsg.payload = msg.payload.data[5]\n//flow.set(\"Machine1A3\", msg.payload.data[1].toFixed(2))\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1420,"wires":[["1ebb0414.537c7c"]]},{"id":"127c54d.aad96ab","type":"ui_gauge","z":"974f83a0.4973a","name":"A3","group":"97f367d3.be02e8","order":27,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"A","format":"{{msg.value}}","min":0,"max":"25","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1370,"y":1420,"wires":[]},{"id":"675b7676.7f0208","type":"debug","z":"974f83a0.4973a","name":"Voltage R-N","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1250,"y":1060,"wires":[]},{"id":"6e131fef.1bbee","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1120,"wires":[["aa6347d2.4c5b38"]]},{"id":"aa6347d2.4c5b38","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1120,"wires":[["a2460df0.df50f"]]},{"id":"a2460df0.df50f","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1V12\", msg.value)\nglobal.set(\"sensorData[3]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1120,"wires":[["b761861.f5ed678"]]},{"id":"ffd70cc2.acaf5","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1180,"wires":[["6cba3723.3a8ba8"]]},{"id":"6cba3723.3a8ba8","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1180,"wires":[["9569860c.747ef8"]]},{"id":"9569860c.747ef8","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1V23\", msg.value)\nglobal.set(\"sensorData[4]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1180,"wires":[["72c31316.aefacc"]]},{"id":"72c31316.aefacc","type":"ui_gauge","z":"974f83a0.4973a","name":"V Y Phase","group":"97f367d3.be02e8","order":13,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"V","format":"{{msg.value}}","min":0,"max":"400","colors":["#00b500","#e6e600","#ca3838"],"seg1":"300","seg2":"350","x":1390,"y":1180,"wires":[]},{"id":"98911afe.df6738","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1240,"wires":[["b34ac4b2.7e25d8"]]},{"id":"b34ac4b2.7e25d8","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1240,"wires":[["340f7440.756fec","675b7676.7f0208"]]},{"id":"340f7440.756fec","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1V31\", msg.value)\nglobal.set(\"sensorData[5]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1240,"wires":[["ea14d2da.b82f2"]]},{"id":"ea14d2da.b82f2","type":"ui_gauge","z":"974f83a0.4973a","name":"V B Phase","group":"97f367d3.be02e8","order":14,"width":6,"height":6,"gtype":"gage","title":"{{msg.label}}","label":"V","format":"{{msg.value}}","min":0,"max":"400","colors":["#00b500","#e6e600","#ca3838"],"seg1":"300","seg2":"350","x":1390,"y":1240,"wires":[]},{"id":"956b0aab.9dd2e8","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1300,"wires":[["eb68d457.d20ae8"]]},{"id":"eb68d457.d20ae8","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1300,"wires":[["a1dd6dc0.1b3b8"]]},{"id":"a1dd6dc0.1b3b8","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1A1\", msg.value)\nglobal.set(\"sensorData[6]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1300,"wires":[["de65a111.4a632"]]},{"id":"45a3e21e.e7591c","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1360,"wires":[["8ce290d1.abf82"]]},{"id":"8ce290d1.abf82","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1360,"wires":[["9be084a5.a74548"]]},{"id":"9be084a5.a74548","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1A2\", msg.value)\nglobal.set(\"sensorData[7]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1360,"wires":[["f1d8a5b0.cdf338"]]},{"id":"1ebb0414.537c7c","type":"function","z":"974f83a0.4973a","name":"set MSB LSB","func":"var m = msg.payload[1].toString(16)\nvar l = msg.payload[0].toString(16)\n//node.warn([\"m\",m])\n//node.warn([\"l\",l])\n//var value = (msg.payload[1] << 16) + (msg.payload[0])\nvar k=\"0x\"+m+\"\"+l;\n//var n=parseInt(k,16)\n//var num3=(m<<16)|(l);\n//node.warn([\"k\",k])\nmsg.payload=k\n//node.warn(value)\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1420,"wires":[["d1056ca8.ec57f"]]},{"id":"d1056ca8.ec57f","type":"function","z":"974f83a0.4973a","name":"IEEE-754 to float","func":"/* Converts from an number, string, buffer or array representing an IEEE-754 value\n * to a javascript float.\n * The following may be given in msg.payload:\n *      A string representing a number, which may be hex or binary\n *        examples, \"1735\"  \"0x02045789\"  0b01000000010010010000111111011011\n *      An integer value\n *      A four element array or buffer of 8 bit values, most significant byte first.\n*/ \n// first make a number from the given payload if necessary\nlet intValue;\nif (typeof msg.payload === \"number\") {\n    intValue = msg.payload;\n} else if (typeof msg.payload === \"string\") {\n    intValue = Number(msg.payload);\n} else if (msg.payload.length == 4) {\n    // four byte array or buffer\n    intValue = (((((msg.payload[0] << 8) + msg.payload[1]) << 8) + msg.payload[2]) << 8) + msg.payload[3];\n} else {\n    node.warn(\"Unrecognised payload type or length\");\n}\n\nmsg.payload = parseFloat(Int2Float32(intValue));\nreturn msg;\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}","outputs":1,"noerr":0,"x":1030,"y":1420,"wires":[["65cc394.bf3cbc8"]]},{"id":"65cc394.bf3cbc8","type":"function","z":"974f83a0.4973a","name":"","func":"msg.value = msg.payload.toFixed(2)\nglobal.set(\"Machine1A3\", msg.value)\nglobal.set(\"sensorData[8]\", msg.value)\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":1420,"wires":[["127c54d.aad96ab"]]},{"id":"55fb13f2.77689c","type":"inject","z":"b93974df.3f7a08","name":"get IP","topic":"Node-Red IP Address","payload":"eth0","payloadType":"str","repeat":"10","crontab":"","once":true,"onceDelay":"1","x":220,"y":140,"wires":[["778867ee.d6f328"]]},{"id":"778867ee.d6f328","type":"exec","z":"b93974df.3f7a08","command":"ifconfig","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"ifconfig","x":340,"y":220,"wires":[["b036eb24.dae548","3702cfe2.413ee"],[],[]]},{"id":"b036eb24.dae548","type":"function","z":"b93974df.3f7a08","name":"Extract network config","func":"var input, tokens, inet;\ninput = msg.payload;\ntokens = input.split(\":\", 11);\n//node.warn(tokens)\ninet = tokens[10].split(\" \", 40);\n//node.warn(inet)\nglobal.set('IP_Address',inet[13])\n//node.warn(inet[13])\n","outputs":1,"noerr":0,"x":540,"y":300,"wires":[["3702cfe2.413ee"]]},{"id":"3702cfe2.413ee","type":"debug","z":"b93974df.3f7a08","name":"test out","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":700,"y":160,"wires":[]},{"id":"68cc8bd6.1d0974","type":"debug","z":"974f83a0.4973a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":400,"y":1040,"wires":[]},{"id":"96e466ce.22a318","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"5","x":150,"y":180,"wires":[["cd45aff0.66a24"]]},{"id":"cd45aff0.66a24","type":"file in","z":"79016d77.f7b894","name":"Notification.txt","filename":"/home/pi/Desktop/Notification.txt","format":"utf8","chunk":false,"sendError":false,"x":380,"y":180,"wires":[["476eb31.649d64c"]]},{"id":"13809691.2f63f9","type":"function","z":"79016d77.f7b894","name":"settings obj","func":"var Dropdown=global.get('ParaDrop');\nvar RecipDetails = msg.payload.RecipDetails\nvar NoOfRecip = msg.payload.NoOfRecip\nmsg.payload.Dropdown=Dropdown;\nmsg.payload={\"RecipDetails\":RecipDetails,\"NoOfRecip\":NoOfRecip,\"Dropdown\":Dropdown}\n//node.warn(Dropdown)\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":180,"wires":[["33fc989a.a343e8","34eb8407.8eed4c"]]},{"id":"a99444ee.f89188","type":"file","z":"79016d77.f7b894","name":"Notification.txt","filename":"/home/pi/Desktop/Notification.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1080,"y":180,"wires":[["afbeb7ad.573fb8","d0a9b0d5.a9d56"]]},{"id":"d0a9b0d5.a9d56","type":"function","z":"79016d77.f7b894","name":"SetVal","func":"var data = msg.payload.RecipDetails;\nvar n = data.length;\nflow.set('Details',msg.payload.RecipDetails)\nfor(var i =0; i<n;i++)\n{\n    var id = data[i].id\n    global.set(\"id\"+i,id)\n    global.set(\"Low\"+id,data[i].Low)\n    global.set(\"LowCritical\"+id,data[i].LowCritical)\n    global.set(\"High\"+id,data[i].High)\n    global.set(\"HighCritical\"+id,data[i].HighCritical)\n    //global.set(\"Parameter\" + i, msg.payload.Dropdown[i].name);\n    \n}\n\n//node.warn(global.get(\"Parameter0\"))","outputs":1,"noerr":0,"x":1250,"y":220,"wires":[["afbeb7ad.573fb8"]]},{"id":"afbeb7ad.573fb8","type":"debug","z":"79016d77.f7b894","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1430,"y":180,"wires":[]},{"id":"33fc989a.a343e8","type":"debug","z":"79016d77.f7b894","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":750,"y":240,"wires":[]},{"id":"476eb31.649d64c","type":"json","z":"79016d77.f7b894","name":"","property":"payload","action":"","pretty":false,"x":550,"y":180,"wires":[["13809691.2f63f9"]]},{"id":"34eb8407.8eed4c","type":"ui_template","z":"79016d77.f7b894","group":"3f199298.4bc2ce","name":"Alert List","order":1,"width":"24","height":"24","format":"<html>\n<body>\n<style>\nbody{\n    background-image : url(\"/background9.jpg\");\n}\n    \n    input[type=text]{\n    \tbackground-color: white;\n    \ttext-align : center;\n    \tcolor : black;\n        border:none;\n        padding : 7px;\n    }\n    input[type=submit] {\n  background-color: #4CAF50;\n  color: white;\n  padding: 5px 7px;\n  text-align : center;\n  border: none;\n  border-radius: 1px;\n  cursor: allowed;\n  float: left;\n}\n\ninput[type=submit]:hover {\n  background-color: #45a049;\n}\ntable, tr, th, td {\n        \n        background-color: white;\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\tcolor: black;\n\t\ttext-align: center;\n\t\tpadding: 1px;\n}\n\n input[type=number]{\n    background-color: white;\n    color : black;\n    text-align : center;\n    border : 1px solid #0093dc;\n    padding : 7px 6px;\n    text-align : center;\n    }  \n    th{\n\t  text-align : center;\n\t  color: white;\n\t  font-weight: normal;\n\t  font-family: candara;\n\t  font-size: 110%;\n\t  background-color: #097479;\n\t  padding : 7px 3px\n\t  }\n\t td {\n        \n        background-color: white;\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\tcolor : black;\n\t\ttext-align : center;\n\t\tpadding: 1px;\n}\ntr, th, td \n{\n    width: 200px;\n}\n  \n</style>\n\n    \n<form id=\"MobileNoForm\"  ng-submit=\"submitlist()\" align=\"justify\">\n<br>\n<div padding: 5px;  margin: 5px; >\n<div class = \"addrow\">\n<div class = \"column\">\n\n\n<table id=\"mytable\" class=\"table table-bordered\">\n<thead>\n<tr>\n<th style=\"width:20% type='text' name ='Parametr' ;\">Parameter</th>\n<th style=\"width:20% type='text' name ='LowCritical';\">LowCritical</th>\n<th style=\"width:20% type='text' name ='Low';\">Low</th>\n<th style=\"width:20% type='text' name ='High';\">High</th>\n<th style=\"width:20% type='text' name ='HighCritical';\">HighCritical</th>\n<th style=\"width:30% type='text' name ='Code';\">Remove</th>\n</tr>\n</thead>\n<tbody align=\"center\">\n<tr ng-repeat=\"Details in recipients\">\n<!--<td><select id=\"sel\" name=\"Details.id{{$index}}\"  placeholder = \"-\" ng-model=\"Details.id\" required></select></td>-->\n <td>\n     <select id=\"EmpDropdown\" ng-model=\"Details.id\" >\n                        <!-- when user selects option from dropdown, value attrubite in option tag will receive the varible value assigned to it. This value will be passed to \"ng-model=\"your_variable\"\" and can be accessed\n                        in java script . another way of accessing it is using DOM:document.getElementById(\"Your Select ID\").value syntax -->\n                        <option ng-repeat=\"Tasklist in Drop\" value=\"{{Tasklist.id}}\" required >{{Tasklist.name}}\n                        <!--ng-repeat repeas html tag for each object in the list/array assigned to it -->\n                        </option>\n                    </select>\n                    </td>\n<td><input  type=\"number\" name=\"LowCritical{{$index}}\" placeholder = \"Enter LowCritical\" ng-model=\"Details.LowCritical\" required></td>\n<td><input  type=\"number\" name=\"Low{{$index}}\" placeholder = \"Enter Low\" ng-model=\"Details.Low\" required></td>\n<td><input  type=\"number\" name=\"High{{$index}}\" placeholder = \"Enter High\" ng-model=\"Details.High\" required></td>\n<td><input  type=\"number\" name=\"HighCritical{{$index}}\" placeholder = \"Enter HighCritical\" ng-model=\"Details.HighCritical\" required></td>\n                    \n<td><input type=\"button\" value=\"Remove\" ng-click=\"deleteDetails($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\"></td>\n</tbody>\n</table>\n<br>\n<br>\n</div>\n</div>\n</div>\n<input type=\"submit\" class=\"btn btn-primary\" value=\"Submit\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"/>   \n<input type=\"button\" name=\"NoOfRecip\"  value =\"Add Parameter\" ng-click=\"addRecipient()\" ng-style=\"{align:'right',float: 'left',background: '#7dcfff', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\">\n\n</form>\n<script>\nvar dropdata;\n\t (function(scope) {   \t\n  scope.$watch('msg', function(msg) {\n      console.log([\"msg\",msg]);\n    if (msg) {\n      $(\"#my_\"+scope.$id).html(msg.payload);\n    scope.data = angular.copy(msg.payload.RecipDetails);\n   scope.Drop = angular.copy(msg.payload.Dropdown);\n      scope.recipients = angular.copy(scope.data);\n    dropdata = angular.copy(scope.Drop);\n          \n    }\n \n      //var msg={\"payload\":{\"dropdata\" :(scope.dropdata)}};\n//scope.send(msg);\n  });\n\n\t scope.enabledEdit = [];\t\n//scope.data = [{ id:\"\",Low:\"\",LowCritical:\"\",High:\"\",HighCritical:\"\"}];\n  \n//scope.recipients = angular.copy(scope.data);\n\n\t\n\t    scope.addRecipient = function(){\n\t    \n\t    if(scope.recipients.length< 10)\n\t    {\n\tvar Details ={ id:\"\",Low:\"\",LowCritical:\"\",High:\"\",HighCritical:\"\"};\n\t\tscope.recipients.push(Details);\n\t\tscope.enabledEdit[scope.recipients.length-1]=true;\n\t\t}\n\t\telse\n\t\t{\n\talert(\"Only 10 entries allowed\");\n\t\t}\n}\n\t  scope.editDetails = function(index){\n\t  console.log(\"edit index\"+index);\n\t  scope.enabledEdit[index] = true;\n\t}\n\tscope.deleteDetails = function(index) {\n\t\tvar r = confirm(\"Are you sure you want to delete?\");\n  if (r == true) {\n    txt = \"You pressed OK!\";\n    scope.recipients.splice(index,1);\n    scope.submitlist();\n  } else {\n    txt = \"You pressed Cancel!\";\n  }\n  document.getElementById(\"demo\").innerHTML = txt;\n\t}\n\nscope.submitlist = function(){\n    \n    for(var i = 0 ; i < scope.recipients.length ; i++)\n    {\n        //window.confirm([\"for loopin sg=umbmit\"]);\n        scope.recipients[i].GenCode = dropdata[scope.recipients[i].id].code;\n    }\n//window.confirm([\"above msg\"]);\nvar msg={\"payload\":{\"RecipDetails\" :(scope.recipients),\"NoOfRecip\":(scope.recipients.length),\"Dropdown\":(scope.Drop)}};//,\"SetVal\":(dropdata[scope.recipients[0].Value]\n//window.confirm([\"msg\",msg]);\nscope.send(msg);\nwindow.confirm(\"Data Saved\");\nconsole.log([\"form submitted:\",(msg)]);\n\n}\n})(scope);\n</script>            \n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":870,"y":180,"wires":[["a99444ee.f89188"]]},{"id":"4e07fcfd.e70f14","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":240,"wires":[["410f7a78.857054"]]},{"id":"410f7a78.857054","type":"function","z":"79016d77.f7b894","name":"","func":"if(global.get('Para1DropUpdated')==1)\n{\n    global.set('Para1DropUpdated',0);\n    return msg;\n}","outputs":1,"noerr":0,"x":360,"y":240,"wires":[["cd45aff0.66a24"]]},{"id":"c9cd5d8d.c1ebc","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"5","x":150,"y":320,"wires":[["1801c122.6f434f"]]},{"id":"1801c122.6f434f","type":"file in","z":"79016d77.f7b894","name":"Parameter.txt","filename":"/home/pi/Desktop/Parameter.txt","format":"utf8","chunk":false,"sendError":false,"x":330,"y":320,"wires":[["66c3616e.b866e"]]},{"id":"66c3616e.b866e","type":"function","z":"79016d77.f7b894","name":"settings obj","func":"global.set(\"settings\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":320,"wires":[["ca058969.c42728"]]},{"id":"ca058969.c42728","type":"json","z":"79016d77.f7b894","name":"","property":"payload","action":"","pretty":false,"x":650,"y":320,"wires":[["66d05994.c6ff28"]]},{"id":"66d05994.c6ff28","type":"ui_template","z":"79016d77.f7b894","group":"d60f6199.c01a8","name":"Master Dropdown","order":1,"width":"24","height":"24","format":"<html>\n    <head>\n        \n    </head>\n    <body>\n      <style>\nbody{\n    background-image : url(\"/background9.jpg\");\n}\n    \n    input[type=text]{\n    \tbackground-color: white;\n    \ttext-align : center;\n    \tcolor : black;\n        border:none;\n        padding : 7px;\n    }\n    input[type=submit] {\n  background-color: #4CAF50;\n  color: white;\n  padding: 5px 7px;\n  text-align : center;\n  border: none;\n  border-radius: 1px;\n  cursor: allowed;\n  float: left;\n}\n\ninput[type=submit]:hover {\n  background-color: #45a049;\n}\ntable, tr, th, td {\n        \n        background-color: white;\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\tcolor: black;\n\t\ttext-align: center;\n\t\tpadding: 1px;\n\t\theight: 100%;\n}\n\n input[type=number]{\n    background-color: white;\n    color : black;\n    text-align : center;\n    border : 1px solid #0093dc;\n    padding : 7px 6px;\n    text-align : center;\n    }  \n    th{\n\t  text-align : center;\n\t  color: white;\n\t  font-weight: normal;\n\t  font-family: candara;\n\t  font-size: 110%;\n\t  background-color: #097479;\n\t  padding : 7px 3px\n\t  }\n\t td {\n        \n        background-color: white;\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\tcolor : black;\n\t\ttext-align : center;\n\t\tpadding: 1px;\n}\ntr, th, td \n{\n    width: 200px;\n}\n</style>\n  \n    \n<div>\n\n\n<div >\n    <form id=\"TableForm\" ng-submit=\"MyTableFormAction()\" >\n        <table align = \"center\" id=\"EmptableWithEditDelete3\">\n            <tr>\n                <th>\n                    Sr. No.\n                </th>\n                <th>\n                    Parameter\n                </th>\n                <th>\n                    Edit\n                </th>\n                <th>\n                    Add Record\n                </th>                \n                <th>\n                    Delete\n                </th>\n            </tr>\n            <tr ng-repeat=\"Set in IntMsg.payload.SetData\" >\n                <td disabled=\"true\">\n                    {{$index+1}}\n                </td>\n                <td>\n                    <input type=\"text\" id=\"EmpHighInput{{$index}}\" ng-model=\"Set.Name\"  disabled=\"true\" required> <!--ng-model=\"IntMsg.payload.SetData[$index].Name\"-->\n                </td>\n                <td>\n                    <button type=\"button\"  ng-click=\"TableFormRowEditBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Edit\n                    </button>\n                        \n                </td>\n                <td>\n                    <button type=\"button\"  ng-click=\"TableFormAddRowBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Add Record\n                    </button>\n                        \n                </td>\n                <td>\n                    <button type=\"button\" ng-click=\"TableFormRowDeleteBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Delete\n                    </button>\n                </td>\n            </tr>\n        </table>\n        <br>\n        <br>\n\n       <button type=\"Submit\" name=\"Submit\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> \n       Submit Data\n       </button>\n       <button type=\"button\" ng-click=\"TableAddFirstRecord()\" ng-style=\"{float: 'left', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> Add Record\n           \n       </button>\n           \n       \n    </form>\n</div>\n</div>\n<script>\n//send({payload:myFunction1()})\n//few learnigs:  if msg.pyload is used to link data to html tags like \n//<input type=\"text\" id=\"EmpId\" name=\"fname\" value={{msg.payload.TSetData.Selectedobj}} disabled > \n//then \n//ensure orginal data variables in msg.payload are intact through out the session/user interaction. \n\n//\"{{angular_var}}\"  syntax is used in html to pass varible data from angular to html tags\n//angular function send({payload:var/funct}) is used to send the msg to node red using ng-click directives. it updates msg.payload of entire template. \n// if your html view tags like input msg/table/dropdowns are getting reset that means\n//while sending msg, orginal msg got disturbed.\n// to solve this issue you can preserve original msg by adding new varibles to orginal msg.payload .\n// this is allowed but you should not disturb incoming msg.payload varibales data structure.\n// i.e say incoming msg.payload had data structure like msg={\"payload\":{\"emp\":employees}}\n//employees=[{\"name\":\"e1\",\"id\":1,\"dept\":\"dept1\",\"div\":\"div1\"},{\"name\":\"e2\",\"id\":2,\"dept\":\"dept2\",\"div\":\"div2\"},{\"name\":\"e3\",\"id\":3,\"dept\":\"dept3\",\"div\":\"div3\"}]\n// in this case you can add msg={\"payload\":{\"emp\":employees},{\"newVar\":newVarData}} this will works as orignal msg.payload.emp is not disturbed and new object \"NewVar is added\"\n// you can chage values of all varibles . that will not create any error or reset of view.\n\n\n// to check node-red ui is working properly , type \"http://127.0.0.1:1880/ui/\" in chrome browser and click\n//on broweser three dots menu-->more tools-->developer tools ensure at riht side of broweser debug window is opend\n// click on Consol tab to see error/status mssages.\n// you can use console.log(\"your_var_name\"); to see the value\n\n  var test=document.getElementById(\"EmpId\");\n\n(function(scope) {\n    // use this func\n    scope.IntMsg={\"payload\":{\"SetData\":[{}]}};\n    \n  scope.$watch('msg', function(msg) {\n    if (msg) {\n      // Do something when msg arrives\n            scope.IntMsg=msg;\n  \n    console.log(msg.payload);\n    }\n    });\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n    //\n    scope.TableFormRowEditBtn=function MyTableFormEditBtn(index){\n        console.log(\"hi\");\n        document.getElementById(\"EmptableWithEditDelete3\").rows[index+1].cells[1].getElementsByTagName(\"input\")[0].disabled=false\n        \n        //document.getElementById(\"DivtableWithEditDelete\").rows[index+1].cells[1] provides row-1 column 1 cell. in this cell. as index in JS starts with zero,need to do +1 to get first row.\n        //to access input tag from row-1,column-1, \"getElementsByTagName(\"input\")[0]\" is used.[0] provides first input tag in this context.\n        \n        //console.log(scope.msg.payload.MyFormData.Edit[index]);\n        \n    }\n\n\n    scope.TableAddFirstRecord=function MyTableAddFirstRecordBtn(){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n        console.log(\"TableAddFirstRecord clicked\");\n        var dummy={\"Pressure\":\"\",};\n        scope.IntMsg.payload.SetData.push(dummy);\n    }\n\n\n    scope.TableFormAddRowBtn=function MyTableFormAddRowBtn(index){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n       var dummy={\"Pressure\":\"\"};\n        scope.IntMsg.payload.SetData.splice(index+1, 0, dummy);\n    }\n    scope.MyTableFormAction= function MyTableFormData(){\n        var i;\n        for (i = 0; i < scope.IntMsg.payload.SetData.length; i++) {\n            document.getElementById(\"EmptableWithEditDelete3\").rows[i+1].cells[1].getElementsByTagName(\"input\")[0].disabled=true\n    \n            \n        }\n        \n        console.log(\"MyTableFormData\");\n        console.log(scope.IntMsg.payload.SetData);\n        window.confirm(\"Data Saved\");\n        scope.send({\"payload\":(scope.IntMsg.payload)});\n        \n    }\n    scope.TableFormRowDeleteBtn=function MyTableFormRowDeleteBtn(index){\n        var txt;\n        var r = confirm(\"Press OK to Confim Delete \");\n        if (r == true) {\n            scope.IntMsg.payload.SetData.splice(index,1);\n            scope.MyTableFormAction();\n            console.log([\"TableFormRowDeleteBtn\"],index);\n        }\n        \n\n    }\n    \n})(scope);\n\n\n</script>\n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":850,"y":320,"wires":[["662e9f96.90039"]]},{"id":"662e9f96.90039","type":"file","z":"79016d77.f7b894","name":"Parameter.txt","filename":"/home/pi/Desktop/Parameter.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1030,"y":320,"wires":[["40f53280.d6f48c"]]},{"id":"40f53280.d6f48c","type":"function","z":"79016d77.f7b894","name":"SetVal","func":"var data= msg.payload.SetData;\nvar n = data.length;\n//node.warn(n)\nglobal.set('AllPara',msg.payload)\n//node.warn(global.get('AllPara'))\n\nfor(i=0;i<n;i++)\n{\n    global.set('SetData['+i+']',msg.payload.SetData[i])\n}\n\nvar a= global.get('SetData')\nfor(i=0;i<n;i++)\n{\n    global.set('Parameter['+i+']',a[i].Name)\n    global.set('id['+i+']',i)\n}\nvar b=global.get('Parameter')\n\nfor(i=0;i<n;i++)\n{\n    global.set('name['+i+']',b[i])\n}\nvar d=global.get('name')\nvar ParaDet={ };\nfor(i=0;i<n;i++)\n{\n    ParaDet[i]={\"id\":i,\"name\":d[i]};\n}\nmsg.payload= ParaDet\n\nreturn msg;\n","outputs":1,"noerr":0,"x":1210,"y":320,"wires":[["c4ac6fc5.2af6e"]]},{"id":"c4ac6fc5.2af6e","type":"function","z":"79016d77.f7b894","name":"SetVal","func":"global.set('ParaDrop',msg.payload);\nglobal.set('Para1DropUpdated',1);\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":320,"wires":[["5ac261bd.dc3b6"]]},{"id":"5ac261bd.dc3b6","type":"debug","z":"79016d77.f7b894","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1510,"y":320,"wires":[]},{"id":"a6017e1b.f99d","type":"inject","z":"79016d77.f7b894","name":"Notifications","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":true,"onceDelay":"1","x":160,"y":1160,"wires":[["afaae67e.005bd8"]]},{"id":"afaae67e.005bd8","type":"file in","z":"79016d77.f7b894","name":"myform.txt","filename":"/home/pi/Desktop/myform.txt","format":"utf8","chunk":false,"sendError":false,"x":370,"y":1160,"wires":[["318f2a71.17dea6"]]},{"id":"318f2a71.17dea6","type":"json","z":"79016d77.f7b894","name":"","property":"payload","action":"","pretty":false,"x":530,"y":1160,"wires":[["1e889702.3b9f89","47eb92dc.6b592c","cdfa1472.cf6e48","6530558a.ceceec","83f9b454.254488","e4f8fe78.52d82","f64641e8.f819f","be1e743.1d43988","76b54523.f1fffc"]]},{"id":"1e889702.3b9f89","type":"function","z":"79016d77.f7b894","name":"ID: 0 Coolant tank pH","func":"var Low= global.get(\"Low0\");\nvar LowCritical= global.get(\"LowCritical0\");\nvar High= global.get(\"High0\");\nvar HighCritical= global.get(\"HighCritical0\");\nvar id = \"0\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id0LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id0LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id0LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id0LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id0LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id0LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id0HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id0HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id0HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id0HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id0HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id0HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\n\n\n","outputs":2,"noerr":0,"x":820,"y":680,"wires":[["8885af82.bc53a"],["96626b42.552528"]]},{"id":"34a9b3bd.12c32c","type":"json","z":"79016d77.f7b894","name":"","property":"payload","action":"","pretty":false,"x":1370,"y":1180,"wires":[["23632e57.479972","217898ca.30a018"]]},{"id":"23632e57.479972","type":"debug","z":"79016d77.f7b894","name":"SMS","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1370,"y":1240,"wires":[]},{"id":"96626b42.552528","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":700,"wires":[["34a9b3bd.12c32c"]]},{"id":"47eb92dc.6b592c","type":"function","z":"79016d77.f7b894","name":"ID: 1 panel temp","func":"var Low= global.get(\"Low1\");\nvar LowCritical= global.get(\"LowCritical1\");\nvar High= global.get(\"High1\");\nvar HighCritical= global.get(\"HighCritical1\");\nvar id = \"1\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id1LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id1LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id1LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id1LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id1LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id1LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id1HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id1HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id1HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id1HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id1HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id1HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":800,"y":800,"wires":[["566b17f8.684868"],["a2dfcdc5.e5a92"]]},{"id":"566b17f8.684868","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":780,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"a2dfcdc5.e5a92","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":820,"wires":[["34a9b3bd.12c32c"]]},{"id":"cdfa1472.cf6e48","type":"function","z":"79016d77.f7b894","name":"ID: 2 panel humidity","func":"var Low= global.get(\"Low2\");\nvar LowCritical= global.get(\"LowCritical2\");\nvar High= global.get(\"High2\");\nvar HighCritical= global.get(\"HighCritical2\");\nvar id = \"2\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id2LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id2LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id2LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id2LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id2LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id2LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id2HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id2HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id2HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id2HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id2HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id2HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":820,"y":920,"wires":[["6be81f2d.ce908"],["cbc1e522.cf2878"]]},{"id":"6be81f2d.ce908","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":900,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"cbc1e522.cf2878","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":940,"wires":[["34a9b3bd.12c32c"]]},{"id":"6530558a.ceceec","type":"function","z":"79016d77.f7b894","name":"ID: 3 V R phase","func":"var Low= global.get(\"Low3\");\nvar LowCritical= global.get(\"LowCritical3\");\nvar High= global.get(\"High3\");\nvar HighCritical= global.get(\"HighCritical3\");\nvar id = \"3\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id3LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id3LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id3LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id3LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id3LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id3LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id3HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id3HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id3HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id3HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id3HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id3HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":800,"y":1040,"wires":[["a0eac315.34164"],["ac7bd74.cfa1c28"]]},{"id":"a0eac315.34164","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1020,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"ac7bd74.cfa1c28","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1060,"wires":[["34a9b3bd.12c32c"]]},{"id":"83f9b454.254488","type":"function","z":"79016d77.f7b894","name":"ID: 4 V Y phase","func":"var Low= global.get(\"Low4\");\nvar LowCritical= global.get(\"LowCritical4\");\nvar High= global.get(\"High4\");\nvar HighCritical= global.get(\"HighCritical4\");\nvar id = \"4\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id4LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id4LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id4LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id4LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id4LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id4LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id4HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id4HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id4HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id4HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id4HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id4HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":800,"y":1160,"wires":[["35e96ed6.08afc2"],["ed0a1473.f4b0e8"]]},{"id":"35e96ed6.08afc2","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1140,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"ed0a1473.f4b0e8","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1180,"wires":[["34a9b3bd.12c32c"]]},{"id":"e4f8fe78.52d82","type":"function","z":"79016d77.f7b894","name":"ID: 5 V B phase","func":"var Low= global.get(\"Low5\");\nvar LowCritical= global.get(\"LowCritical5\");\nvar High= global.get(\"High5\");\nvar HighCritical= global.get(\"HighCritical5\");\nvar id = \"5\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id5LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id5LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id5LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id5LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id5LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id5LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id5HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id5HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id5HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id5HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id5HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id5HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":800,"y":1280,"wires":[["6c6121d9.f9979"],["6e505129.eea4f"]]},{"id":"6c6121d9.f9979","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1260,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"6e505129.eea4f","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1300,"wires":[["34a9b3bd.12c32c"]]},{"id":"f64641e8.f819f","type":"function","z":"79016d77.f7b894","name":"ID: 6 A1","func":"var Low= global.get(\"Low6\");\nvar LowCritical= global.get(\"LowCritical6\");\nvar High= global.get(\"High6\");\nvar HighCritical= global.get(\"HighCritical6\");\nvar id =\"6\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id6LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id6LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id6LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id6LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id6LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id6LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id6HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id6HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id6HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id6HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id6HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id6HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":780,"y":1400,"wires":[["8bd60a20.10b028"],["21232aee.5005d6"]]},{"id":"8bd60a20.10b028","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1380,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"21232aee.5005d6","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1420,"wires":[["34a9b3bd.12c32c"]]},{"id":"be1e743.1d43988","type":"function","z":"79016d77.f7b894","name":"ID: 7 A2","func":"var Low= global.get(\"Low7\");\nvar LowCritical= global.get(\"LowCritical7\");\nvar High= global.get(\"High7\");\nvar HighCritical= global.get(\"HighCritical7\");\nvar id = \"7\"\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData[' + id +']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id7LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id7LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id7LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id7LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id7LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id7LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id7HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id7HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id7HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id7HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id7HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id7HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":780,"y":1520,"wires":[["3a1c2781.714ae8"],["dd1d4bb7.c02378"]]},{"id":"3a1c2781.714ae8","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1500,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"dd1d4bb7.c02378","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1540,"wires":[["34a9b3bd.12c32c"]]},{"id":"76b54523.f1fffc","type":"function","z":"79016d77.f7b894","name":"ID: 8 A3","func":"var id = \"8\"\nvar Low= global.get(\"Low8\");\nvar LowCritical= global.get(\"LowCritical8\");\nvar High= global.get(\"High8\");\nvar HighCritical= global.get(\"HighCritical8\");\nvar para=global.get('ParaDrop['+id+']')\nvar Alert = para.name;\nvar LiveValue=parseFloat(global.get('sensorData['+id+']'));\n\nvar NoOfRecip = msg.payload.NoOfRecip;\nvar Name = [];\nvar MobileNo = [];\nvar EmailId =[];\nvar MsgStr = {};\nvar Email = {};\nvar time = new Date();\nvar timeFormat = (time.getDate() + \"-\" + (time.getMonth() + 1) + \"-\" + time.getFullYear() + \",\" + time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds()).toString();\n\n\nfor(i = 0 ; i<NoOfRecip;i++)\n{\n    Name[i] = msg.payload.RecipDetails[i].Name;\n    MobileNo[i] = msg.payload.RecipDetails[i].Mobile;\n    EmailId[i] = msg.payload.RecipDetails[i].EmailId;\n}\n\nif(flow.get(\"id8LowCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" below low critcal level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id8LowCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id8LowCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\nif(flow.get(\"id8LowCount\") > 30)\n{\n    Email.payload = Alert+\" below low level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id8LowCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id8LowCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" below low setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n    \n}\n\nif(flow.get(\"id8HighCount\") > 30)\n{\n    Email.payload = Alert+\" above high level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id8HighCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id8HighCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nif(flow.get(\"id8HighCriticalCount\") > 30)\n{\n    Email.payload = Alert+\" above high critical level \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"id8HighCriticalCount\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"id8HighCriticalCount\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" above high critical setpoint \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}\n\nelse\n{\n    Email.payload = Alert+\" Restored \\nCurrent \"+Alert+\": \" +LiveValue+\"\\nSet values\\nHigher Limit :\"+High+\"\\nLower Limit :\"+Low+\"\\n\\n\\nThis is an autogenerated email. Please do not reply.\";\n    Email.topic = \"CBM Master Alert\"\n    Email.to = EmailId[0];\n    Email.Check= \"None\"\n    for(j=1;j<NoOfRecip;j++)\n    {\n    \tEmail.cc = Email.cc+\",\"+EmailId[j];\n\t}\n\t\t MsgStr.payload = {\n\t\t                    RBE       :   \"None\",\n    \t\t\t\t\t\ttime      :   timeFormat,\n    \t\t\t\t\t\tMobilNo   :   MobileNo,\n    \t\t\t\t\t\tNoOfRecip :   NoOfRecip,\n    \t\t\t\t\t\tAlertType :   \"Time: \"+time+\" ,LVD : Laser2 \"+Alert+\" Restored \"\n    \t\t\t  };\n    \t\t\t  \n    node.send([Email,MsgStr]);\n    return null;\n}","outputs":2,"noerr":0,"x":780,"y":1640,"wires":[["d0f12e14.95392"],["f2c86fe.ed8f39"]]},{"id":"d0f12e14.95392","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":1620,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"f2c86fe.ed8f39","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload.RBE","x":1090,"y":1660,"wires":[["34a9b3bd.12c32c"]]},{"id":"217898ca.30a018","type":"tcp out","z":"79016d77.f7b894","d":true,"host":"172.24.203.158","port":"2001","beserver":"client","base64":false,"end":false,"name":"","x":1630,"y":1180,"wires":[]},{"id":"dcb4ea77.3e5868","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":2610,"y":120,"wires":[["54aef39b.c302dc","668e1db0.a81504","7785d797.0e8db8","ed15c662.b4c998","dacff49f.435ac8","5b158d45.492cf4","51a7eaba.839264","f141e0e1.45629","df683fbd.d1a3d"]]},{"id":"54aef39b.c302dc","type":"function","z":"79016d77.f7b894","name":"Temp Alert","func":"var id = \"1\"\nvar Low= global.get(\"Low1\");\nvar LowCritical= global.get(\"LowCritical1\");\nvar High= global.get(\"High1\");\nvar HighCritical= global.get(\"HighCritical1\");\nvar para=global.get('ParaDrop[1]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[1]');\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id1LowCriticalCount\")\n    flow.set(\"id1LowCriticalCount\", flow.get(\"id1LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id1LowCount\")\n    flow.set(\"id1LowCount\", flow.get(\"id1LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id1LowCriticalCount\",0)\n    flow.set(\"id1LowCount\",0)\n    flow.set(\"id1HighCount\",0)\n    flow.set(\"id1HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id1HighCount\")\n    flow.set(\"id1HighCount\", flow.get(\"id1HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(LiveValue > HighCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id1HighCriticalCount\")\n    flow.set(\"id1HighCriticalCount\", flow.get(\"id1HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2810,"y":180,"wires":[["ea27e0c4.91528"]]},{"id":"ea27e0c4.91528","type":"ui_button","z":"79016d77.f7b894","name":"temp alert","group":"97f367d3.be02e8","order":9,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":180,"wires":[[]]},{"id":"668e1db0.a81504","type":"function","z":"79016d77.f7b894","name":"Humidity Alert","func":"var id = \"2\"\nvar Low= global.get(\"Low2\");\nvar LowCritical= global.get(\"LowCritical2\");\nvar High= global.get(\"High2\");\nvar HighCritical= global.get(\"HighCritical2\");\nvar para=global.get('ParaDrop[2]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[2]');\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id2LowCriticalCount\")\n    flow.set(\"id2LowCriticalCount\", flow.get(\"id2LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id2LowCount\")\n    flow.set(\"id2LowCount\", flow.get(\"id2LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id2LowCriticalCount\",0)\n    flow.set(\"id2LowCount\",0)\n    flow.set(\"id2HighCount\",0)\n    flow.set(\"id2HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id2HighCount\")\n    flow.set(\"id2HighCount\", flow.get(\"id2HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id2HighCriticalCount\")\n    flow.set(\"id2HighCriticalCount\", flow.get(\"id2HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2820,"y":240,"wires":[["bacb5a6d.0af748"]]},{"id":"bacb5a6d.0af748","type":"ui_button","z":"79016d77.f7b894","name":"humidity alert","group":"97f367d3.be02e8","order":10,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":3000,"y":240,"wires":[[]]},{"id":"ed15c662.b4c998","type":"function","z":"79016d77.f7b894","name":"V12 Alert","func":"var id = \"3\"\nvar Low= global.get(\"Low3\");\nvar LowCritical= global.get(\"LowCritical3\");\nvar High= global.get(\"High3\");\nvar HighCritical= global.get(\"HighCritical3\");\nvar para=global.get('ParaDrop[3]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[3]');\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id3LowCriticalCount\")\n    flow.set(\"id3LowCriticalCount\", flow.get(\"id3LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id3LowCount\")\n    flow.set(\"id3LowCount\", flow.get(\"id3LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id3LowCriticalCount\",0)\n    flow.set(\"id3LowCount\",0)\n    flow.set(\"id3HighCount\",0)\n    flow.set(\"id3HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id3HighCount\")\n    flow.set(\"id3HighCount\", flow.get(\"id3HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id3HighCriticalCount\")\n    flow.set(\"id3HighCriticalCount\", flow.get(\"id3HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":300,"wires":[["e058b76f.2ba8a8"]]},{"id":"e058b76f.2ba8a8","type":"ui_button","z":"79016d77.f7b894","name":"v12 alert","group":"97f367d3.be02e8","order":21,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":300,"wires":[[]]},{"id":"51a7eaba.839264","type":"function","z":"79016d77.f7b894","name":"A1 Alert","func":"var id = \"6\"\nvar Low= global.get(\"Low6\");\nvar LowCritical= global.get(\"LowCritical6\");\nvar High= global.get(\"High6\");\nvar HighCritical= global.get(\"HighCritical6\");\nvar para=global.get('ParaDrop[6]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[6]');\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id6LowCriticalCount\")\n    flow.set(\"id6LowCriticalCount\", flow.get(\"id6LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id6LowCount\")\n    flow.set(\"id6LowCount\", flow.get(\"id6LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id6LowCriticalCount\",0)\n    flow.set(\"id6LowCount\",0)\n    flow.set(\"id6HighCount\",0)\n    flow.set(\"id6HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id6HighCount\")\n    flow.set(\"id6HighCount\", flow.get(\"id6HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id6HighCriticalCount\")\n    flow.set(\"id6HighCriticalCount\", flow.get(\"id6HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":480,"wires":[["ed616ab9.4f7d98"]]},{"id":"ed616ab9.4f7d98","type":"ui_button","z":"79016d77.f7b894","name":"a1 alert","group":"97f367d3.be02e8","order":34,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":480,"wires":[[]]},{"id":"7785d797.0e8db8","type":"function","z":"79016d77.f7b894","name":"pH Alert","func":"var id = \"0\"\nvar Details =flow.get('Details')\nvar Low= global.get(\"Low0\");\nvar LowCritical= global.get(\"LowCritical0\");\nvar High= global.get(\"High0\");\nvar HighCritical= global.get(\"HighCritical0\");\nvar para=global.get('ParaDrop[0]')\nvar Alert = para.name;\n\n//node.warn([\"Low\",global.get(\"Low0\")])\nvar LiveValue=parseFloat(global.get('sensorData[0]'));\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id0LowCriticalCount\")\n    flow.set(\"id0LowCriticalCount\", flow.get(\"id0LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id0LowCount\")\n    flow.set(\"id0LowCount\", flow.get(\"id0LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id0LowCriticalCount\",0)\n    flow.set(\"id0LowCount\",0)\n    flow.set(\"id0HighCount\",0)\n    flow.set(\"id0HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id0HighCount\")\n    flow.set(\"id0HighCount\", flow.get(\"id0HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id0HighCriticalCount\")\n    flow.set(\"id0HighCriticalCount\", flow.get(\"id0HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":120,"wires":[["e2c57cf0.6053e","c1a8eb93.9ad848"]]},{"id":"e2c57cf0.6053e","type":"ui_button","z":"79016d77.f7b894","name":"pH Alert","group":"2bf05bec.224e34","order":8,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":120,"wires":[[]]},{"id":"dacff49f.435ac8","type":"function","z":"79016d77.f7b894","name":"V23 Alert","func":"var id = \"4\"\nvar Low= global.get(\"Low4\");\nvar LowCritical= global.get(\"LowCritical4\");\nvar High= global.get(\"High4\");\nvar HighCritical= global.get(\"HighCritical4\");\nvar para=global.get('ParaDrop[4]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[4]');\n//node.warn(global.get('sensorData[' + id +']'))\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id4LowCriticalCount\")\n    flow.set(\"id4LowCriticalCount\", flow.get(\"id4LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id4LowCount\")\n    flow.set(\"id4LowCount\", flow.get(\"id4LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id4LowCriticalCount\",0)\n    flow.set(\"id4LowCount\",0)\n    flow.set(\"id4HighCount\",0)\n    flow.set(\"id4HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id4HighCount\")\n    flow.set(\"id4HighCount\", flow.get(\"id4HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id4HighCriticalCount\")\n    flow.set(\"id4HighCriticalCount\", flow.get(\"id4HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":360,"wires":[["23882437.e1d8ac"]]},{"id":"23882437.e1d8ac","type":"ui_button","z":"79016d77.f7b894","name":"v23 alert","group":"97f367d3.be02e8","order":22,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":360,"wires":[[]]},{"id":"5b158d45.492cf4","type":"function","z":"79016d77.f7b894","name":"V31 Alert","func":"var id = \"5\"\nvar Low= global.get(\"Low5\");\nvar LowCritical= global.get(\"LowCritical5\");\nvar High= global.get(\"High5\");\nvar HighCritical= global.get(\"HighCritical5\");\nvar para=global.get('ParaDrop[5]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[5]');\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id5LowCriticalCount\")\n    flow.set(\"id5LowCriticalCount\", flow.get(\"id5LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id5LowCount\")\n    flow.set(\"id5LowCount\", flow.get(\"id5LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id5LowCriticalCount\",0)\n    flow.set(\"id5LowCount\",0)\n    flow.set(\"id5HighCount\",0)\n    flow.set(\"id5HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id5HighCount\")\n    flow.set(\"id5HighCount\", flow.get(\"id5HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id5HighCriticalCount\")\n    flow.set(\"id5HighCriticalCount\", flow.get(\"id5HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":420,"wires":[["dacf7f44.cb055"]]},{"id":"dacf7f44.cb055","type":"ui_button","z":"79016d77.f7b894","name":"v31 alert","group":"97f367d3.be02e8","order":23,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":420,"wires":[[]]},{"id":"f141e0e1.45629","type":"function","z":"79016d77.f7b894","name":"A2 Alert","func":"var id = \"7\"\nvar Low= global.get(\"Low7\");\nvar LowCritical= global.get(\"LowCritical7\");\nvar High= global.get(\"High7\");\nvar HighCritical= global.get(\"HighCritical7\");\nvar para=global.get('ParaDrop[7]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[7]');\n\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id7LowCriticalCount\")\n    flow.set(\"id7LowCriticalCount\", flow.get(\"id7LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id7LowCount\")\n    flow.set(\"id7LowCount\", flow.get(\"id7LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id7LowCriticalCount\",0)\n    flow.set(\"id7LowCount\",0)\n    flow.set(\"id7HighCount\",0)\n    flow.set(\"id7HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id7HighCount\")\n    flow.set(\"id7HighCount\", flow.get(\"id7HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id7HighCriticalCount\")\n    flow.set(\"id7HighCriticalCount\", flow.get(\"id7HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":540,"wires":[["f0f159b7.0eb678"]]},{"id":"f0f159b7.0eb678","type":"ui_button","z":"79016d77.f7b894","name":"a2 alert","group":"97f367d3.be02e8","order":35,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":540,"wires":[[]]},{"id":"df683fbd.d1a3d","type":"function","z":"79016d77.f7b894","name":"A3 Alert","func":"var id = \"8\";\nvar Low= global.get(\"Low8\");\nvar LowCritical= global.get(\"LowCritical8\");\nvar High= global.get(\"High8\");\nvar HighCritical= global.get(\"HighCritical8\");\nvar para=global.get('ParaDrop[8]')\nvar Alert = para.name;\nvar LiveValue = global.get('sensorData[8]');\n//node.warn([\"id\",id,\"Low\",Low,\"LiveValue\",LiveValue])\n\nif(LiveValue<LowCritical)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low Critical: \" + flow.get(\"id8LowCriticalCount\")\n    flow.set(\"id8LowCriticalCount\", flow.get(\"id8LowCriticalCount\") + 1)\n    node.send(msg)\n}\n\nelse if((LowCritical<LiveValue)&&(LiveValue<Low))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" Low: \" + flow.get(\"id8LowCount\")\n    flow.set(\"id8LowCount\", flow.get(\"id8LowCount\") + 1)\n    node.send(msg)\n}\n\nelse if((Low<LiveValue)&&(LiveValue<High))\n{\n    msg.background = \"transparent\"\n    msg.color = \"white\"\n    msg.label = \"\"\n    flow.set(\"id8LowCriticalCount\",0)\n    flow.set(\"id8LowCount\",0)\n    flow.set(\"id8HighCount\",0)\n    flow.set(\"id8HighCriticalCount\", 0)\n    node.send(msg)\n}\n\nelse if((High<LiveValue)&&(LiveValue<HighCritical))\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High: \" + flow.get(\"id8HighCount\")\n    flow.set(\"id8HighCount\", flow.get(\"id8HighCount\") + 1)\n    node.send(msg)\n}\n\nelse if(HighCritical<LiveValue)\n{\n    msg.background = \"red\"\n    msg.color = \"white\"\n    msg.label = Alert + \" High Critical: \" + flow.get(\"id8HighCriticalCount\")\n    flow.set(\"id8HighCriticalCount\", flow.get(\"id8HighCriticalCount\") + 1)\n    node.send(msg)\n}\nreturn null;","outputs":1,"noerr":0,"x":2800,"y":600,"wires":[["daef5feb.116cd"]]},{"id":"daef5feb.116cd","type":"ui_button","z":"79016d77.f7b894","name":"a3 alert","group":"97f367d3.be02e8","order":36,"width":6,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.color}}","bgcolor":"{{msg.background}}","icon":"fa-exclamation-triangle","payload":"","payloadType":"str","topic":"","x":2990,"y":600,"wires":[[]]},{"id":"ea94c9de.3cc228","type":"comment","z":"79016d77.f7b894","name":"Alert Display","info":"","x":2590,"y":80,"wires":[]},{"id":"593c96d2.a40278","type":"fs-ops-access","z":"c13cdbe0.4cd118","name":"File test","path":"","pathType":"str","filename":"/home/pi/Desktop/csvLog.csv","filenameType":"str","read":true,"write":false,"throwerror":false,"x":800,"y":300,"wires":[["7aece153.32acc"],["3bb82577.b64c3a","4b7131b3.f48"]]},{"id":"3bb82577.b64c3a","type":"function","z":"c13cdbe0.4cd118","name":"StructTitleString","func":"//msg.payload=\"Work order description,Asset Code,Asset Location,Type,Class,Assign To,Priority,Problem Code,Requested By,EVT_ENTEREDBY\"\nmsg.payload=\"Date,Time,Tank, pH, Machine, V12, V23, V31, A1, A2, A3, Temp, Humidity\"\nreturn msg;","outputs":1,"noerr":0,"x":960,"y":420,"wires":[["e8026115.25c59"]]},{"id":"e8026115.25c59","type":"file","z":"c13cdbe0.4cd118","name":"csvLog.csv","filename":"/home/pi/Desktop/csvLog.csv","appendNewline":true,"createDir":true,"overwriteFile":"false","x":1190,"y":420,"wires":[[]]},{"id":"7aece153.32acc","type":"file","z":"c13cdbe0.4cd118","name":"csvLog.csv","filename":"/home/pi/Desktop/csvLog.csv","appendNewline":true,"createDir":false,"overwriteFile":"false","x":1190,"y":300,"wires":[[]]},{"id":"4b7131b3.f48","type":"delay","z":"c13cdbe0.4cd118","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":960,"y":340,"wires":[["7aece153.32acc"]]},{"id":"a4be552a.a27bc8","type":"function","z":"c13cdbe0.4cd118","name":"csv data","func":"var timestamp= new Date();\nvar time = timestamp.getTime()\nvar Local_time=new Date(time).toLocaleString()\n\n\nvar str=Local_time +\",\"+ global.get(\"Tank1description\") +\",\"+ global.get(\"pHValue\") +\",\"+ global.get(\"Machine1description\") +\",\"+ global.get(\"Machine1V12\") +\",\"+ global.get(\"Machine1V23\") +\",\"+ global.get(\"Machine1V31\") +\",\"+ global.get(\"Machine1A1\") +\",\"+ global.get(\"Machine1A2\") +\",\"+ global.get(\"Machine1A3\") +\",\"+ global.get(\"Machine1Temp\") +\",\"+ global.get(\"Machine1Humidity\");\nmsg.payload=str\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":300,"wires":[["593c96d2.a40278"]]},{"id":"280c2990.5e6986","type":"inject","z":"c13cdbe0.4cd118","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":300,"wires":[["5318e5c0.02a5ac","f29aa313.2a0ad"]]},{"id":"5318e5c0.02a5ac","type":"function","z":"c13cdbe0.4cd118","name":"csvLogDelay","func":"flow.set(\"csvDelay\", flow.get(\"csvDelay\") + 1);\n//node.warn(flow.get(\"csvDelay\"));\n\nif(flow.get(\"csvDelay\") > (global.get(\"Tank1csvLogDelay\") * 60))\n{\n    flow.set(\"csvDelay\", 0);\n    return msg;\n}","outputs":1,"noerr":0,"x":370,"y":300,"wires":[["a4be552a.a27bc8"]]},{"id":"f29aa313.2a0ad","type":"function","z":"c13cdbe0.4cd118","name":"IP Address","func":"var ip=global.get('IP_Address')\nmsg.payload=\"http://\"+ip+\":1880/csvLog.csv\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":380,"wires":[["7eaf5bbe.dbec74"]]},{"id":"7eaf5bbe.dbec74","type":"ui_template","z":"c13cdbe0.4cd118","group":"e83fe06f.4f123","name":"Download Button","order":2,"width":4,"height":1,"format":"<!DOCTYPE html>\n<html>\n<body>\n    \n<md-button ng-style=\"{background: '#0000FF', \n                      color:'white',\n                      padding: '10px',\n                      cursor: 'allowed'\n                      \n                      }\"\n\n    ng-click href=\"{{msg.payload}}\"\n>\n<i class=\"fa fa-download\" style = \"color: white;\"></i>\ndownload csv\n</md-button>\n</body>\n</html>\n","storeOutMessages":false,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":550,"y":380,"wires":[[]]},{"id":"ccf92081.cc433","type":"inject","z":"c13cdbe0.4cd118","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"1","x":150,"y":100,"wires":[["b72c9c0b.3e4fb","b860b443.c690d8"]]},{"id":"b72c9c0b.3e4fb","type":"file in","z":"c13cdbe0.4cd118","name":"csvlogdelay.txt","filename":"/home/pi/Desktop/csvlogdelay.txt","format":"utf8","chunk":false,"sendError":false,"x":360,"y":100,"wires":[["93e821d0.e7591"]]},{"id":"93e821d0.e7591","type":"function","z":"c13cdbe0.4cd118","name":"settings obj","func":"//global.set(\"settings\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":100,"wires":[["2b2f1220.ac4bee"]]},{"id":"2b2f1220.ac4bee","type":"json","z":"c13cdbe0.4cd118","name":"","property":"payload","action":"","pretty":false,"x":670,"y":100,"wires":[["1fa3b94f.aa0a17"]]},{"id":"1fa3b94f.aa0a17","type":"ui_template","z":"c13cdbe0.4cd118","group":"e83fe06f.4f123","name":"csv log delay","order":1,"width":24,"height":8,"format":"<html>\n    <head>\n        \n    </head>\n    <body>\n<style>\ntable, th, tr, td\n{\n    border: 1px black solid;\n    border-collapse: collapse;\n    text-align: center;\n}\n\ninput[type = number], input[type = text]\n{\n    background-color: white;\n    border: none;\n    word-wrap: break-word;\n    word-break: break-all;\n    text-align: center;\n}\n\nth\n{\n    background-color: #2a92b5;\n    padding : 7px 3px;\n    color: white;\n}\n\n</style>\n  \n\n    <form id=\"TableForm\" ng-submit=\"MyTableFormAction()\" >\n        <table align = \"center\" id=\"EmptableWithEditDelete1\">\n            <tr>\n                <th>\n                    Sr. No.\n                </th>\n                <th>\n                    csv log delay (mins)\n                </th>\n                <th>\n                    Edit\n                </th>\n                <th>\n                    Delete\n                </th>\n            </tr>\n            \n            <tr ng-repeat=\"Set in IntMsg.payload.SetData\" >\n                <td disabled=\"true\">\n                    {{$index+1}}\n                </td>\n                <td>\n                    <input type=\"number\" step=\"0.01\" id=\"EmpHighInput{{$index}}\" ng-model=\"Set.csvLogDelay\"  disabled=\"true\" required> <!--ng-model=\"IntMsg.payload.SetData[$index].Name\"-->\n                </td>\n                <td>\n                    <button type=\"button\"  ng-click=\"TableFormRowEditBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Edit\n                    </button>\n                </td>\n                <td>\n                    <button type=\"button\" ng-click=\"TableFormRowDeleteBtn($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\">\n                        Delete\n                    </button>\n                </td>\n            </tr>\n        </table>\n        <br>\n        <br>\n\n       <button type=\"Submit\" name=\"Submit\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> \n       Submit Data\n       </button>\n       <button type=\"button\" ng-click=\"TableAddFirstRecord()\" ng-style=\"{float: 'left', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"> Add Record\n           \n       </button>\n           \n       \n    </form>\n\n<script>\n//send({payload:myFunction1()})\n//few learnigs:  if msg.pyload is used to link data to html tags like \n//<input type=\"text\" id=\"EmpId\" name=\"fname\" value={{msg.payload.TSetData.Selectedobj}} disabled > \n//then \n//ensure orginal data variables in msg.payload are intact through out the session/user interaction. \n\n//\"{{angular_var}}\"  syntax is used in html to pass varible data from angular to html tags\n//angular function send({payload:var/funct}) is used to send the msg to node red using ng-click directives. it updates msg.payload of entire template. \n// if your html view tags like input msg/table/dropdowns are getting reset that means\n//while sending msg, orginal msg got disturbed.\n// to solve this issue you can preserve original msg by adding new varibles to orginal msg.payload .\n// this is allowed but you should not disturb incoming msg.payload varibales data structure.\n// i.e say incoming msg.payload had data structure like msg={\"payload\":{\"emp\":employees}}\n//employees=[{\"name\":\"e1\",\"id\":1,\"dept\":\"dept1\",\"div\":\"div1\"},{\"name\":\"e2\",\"id\":2,\"dept\":\"dept2\",\"div\":\"div2\"},{\"name\":\"e3\",\"id\":3,\"dept\":\"dept3\",\"div\":\"div3\"}]\n// in this case you can add msg={\"payload\":{\"emp\":employees},{\"newVar\":newVarData}} this will works as orignal msg.payload.emp is not disturbed and new object \"NewVar is added\"\n// you can chage values of all varibles . that will not create any error or reset of view.\n\n\n// to check node-red ui is working properly , type \"http://127.0.0.1:1880/ui/\" in chrome browser and click\n//on broweser three dots menu-->more tools-->developer tools ensure at riht side of broweser debug window is opend\n// click on Consol tab to see error/status mssages.\n// you can use console.log(\"your_var_name\"); to see the value\n\n  var test=document.getElementById(\"EmpId\");\n\n(function(scope) {\n    // use this func\n    scope.IntMsg={\"payload\":{\"SetData\":[{}]}};\n    \n  scope.$watch('msg', function(msg) {\n    if (msg) {\n      // Do something when msg arrives\n            scope.IntMsg=msg;\n  \n    console.log(msg.payload);\n    }\n    });\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n    //\n    scope.TableFormRowEditBtn=function MyTableFormEditBtn(index){\n        document.getElementById(\"EmptableWithEditDelete1\").rows[index+1].cells[1].getElementsByTagName(\"input\")[0].disabled=false\n        //document.getElementById(\"DivtableWithEditDelete\").rows[index+1].cells[1] provides row-1 column 1 cell. in this cell. as index in JS starts with zero,need to do +1 to get first row.\n        //to access input tag from row-1,column-1, \"getElementsByTagName(\"input\")[0]\" is used.[0] provides first input tag in this context.\n        \n        //console.log(scope.msg.payload.MyFormData.Edit[index]);\n        \n    }\n\n\n    scope.TableAddFirstRecord=function MyTableAddFirstRecordBtn(){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n        console.log(\"TableAddFirstRecord clicked\");\n        var dummy={\"Pressure\":\"\",};\n        scope.IntMsg.payload.SetData.push(dummy);\n    }\n\n\n    scope.TableFormAddRowBtn=function MyTableFormAddRowBtn(index){\n        //Array index in JS variable starts from Zero  where as table row index starts from 1 so index is added with +1\n       var dummy={\"Pressure\":\"\"};\n        scope.IntMsg.payload.SetData.splice(index+1, 0, dummy);\n    }\n    scope.MyTableFormAction= function MyTableFormData(){\n        var i;\n        for (i = 0; i < scope.IntMsg.payload.SetData.length; i++) {\n            document.getElementById(\"EmptableWithEditDelete1\").rows[i+1].cells[1].getElementsByTagName(\"input\")[0].disabled=true\n             }\n        \n        console.log(\"MyTableFormData\");\n        console.log(scope.IntMsg.payload.SetData);\n        window.confirm(\"Data Saved\");\n        scope.send({\"payload\":(scope.IntMsg.payload)});\n        \n    }\n    scope.TableFormRowDeleteBtn=function MyTableFormRowDeleteBtn(index){\n        var txt;\n        var r = confirm(\"Press OK to Confim Delete \");\n        if (r == true) {\n            scope.IntMsg.payload.SetData.splice(index,1);\n            scope.MyTableFormAction();\n            console.log([\"TableFormRowDeleteBtn\"],index);\n        }\n        \n\n    }\n    \n})(scope);\n\n</script>\n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":830,"y":100,"wires":[["8817e979.ae98e8"]]},{"id":"8817e979.ae98e8","type":"file","z":"c13cdbe0.4cd118","name":"csvlogdelay.txt","filename":"/home/pi/Desktop/csvlogdelay.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1060,"y":100,"wires":[["59fc1b9d.360484","b4c1c0ca.9ff3d"]]},{"id":"59fc1b9d.360484","type":"debug","z":"c13cdbe0.4cd118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1390,"y":100,"wires":[]},{"id":"b4c1c0ca.9ff3d","type":"function","z":"c13cdbe0.4cd118","name":"SetVal","func":"var data = msg.payload.SetData;\nvar n= data.length;\n\n\nfor(i=0;i<n;i++)\n{\n    global.set('Tank'+(i+1) + 'csvLogDelay', msg.payload.SetData[i].csvLogDelay);\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":140,"wires":[["59fc1b9d.360484"]]},{"id":"f8dcb62b.c95ad8","type":"inject","z":"c13cdbe0.4cd118","name":"CSV BACKUP","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":540,"wires":[["e64d7354.b9f99"]]},{"id":"e64d7354.b9f99","type":"function","z":"c13cdbe0.4cd118","name":"","func":"var timestamp= new Date();\nvar Month=(timestamp.getMonth()+1);\nvar mon=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"Jul\",\"Aug\",\"Sept\",\"Oct\",\"Nov\",\"Dec\"];\nif((Month-2)==-1)\n{\nmsg.month=\"Dec\"    \n}\nelse\n{\nmsg.month=mon[Month-2]\n}\nmsg.payload= Month;\n//node.warn(msg)\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":540,"wires":[["cbf05faa.f73ae"]]},{"id":"cbf05faa.f73ae","type":"rbe","z":"c13cdbe0.4cd118","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"payload","x":530,"y":540,"wires":[["8ee10347.2991a"]]},{"id":"8ee10347.2991a","type":"function","z":"c13cdbe0.4cd118","name":"","func":"var month=msg.month;\nmsg.payload=\"csvLogBackup\"+\"_\"+month+\".csv\";\nmsg.path=global.get('path');\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":540,"wires":[["c5752301.03456","963aa86.e5fac58"]]},{"id":"c5752301.03456","type":"fs-ops-copy","z":"c13cdbe0.4cd118","name":"csvLog.csv","sourcePath":"/home/pi/Desktop/","sourcePathType":"str","sourceFilename":"csvLog.csv","sourceFilenameType":"str","destPath":"path","destPathType":"msg","destFilename":"payload","destFilenameType":"msg","link":false,"overwrite":false,"x":890,"y":520,"wires":[[]]},{"id":"963aa86.e5fac58","type":"delay","z":"c13cdbe0.4cd118","name":"","pauseType":"delay","timeout":"20","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":560,"wires":[["1cef0ba2.d6d944"]]},{"id":"1cef0ba2.d6d944","type":"fs-ops-move","z":"c13cdbe0.4cd118","name":"csvLog.csv","sourcePath":"/home/pi/Desktop/","sourcePathType":"str","sourceFilename":"csvLog.csv","sourceFilenameType":"str","destPath":"/home/pi/Desktop/","destPathType":"str","destFilename":"payload","destFilenameType":"msg","link":false,"x":1050,"y":560,"wires":[[]]},{"id":"79e3b8d9.6442b8","type":"comment","z":"c13cdbe0.4cd118","name":"csv settings table","info":"","x":140,"y":60,"wires":[]},{"id":"b29e79af.735218","type":"comment","z":"c13cdbe0.4cd118","name":"transferring records to csv file","info":"","x":180,"y":260,"wires":[]},{"id":"2b41f9c1.4d7846","type":"comment","z":"c13cdbe0.4cd118","name":"monthly backup of csv file","info":"","x":170,"y":500,"wires":[]},{"id":"b860b443.c690d8","type":"function","z":"c13cdbe0.4cd118","name":"flow variables","func":"flow.set(\"csvDelay\", 0);\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":180,"wires":[[]]},{"id":"617c8a09.1bf024","type":"inject","z":"c13cdbe0.4cd118","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":620,"wires":[["ed8d3508.129558"]]},{"id":"ed8d3508.129558","type":"function","z":"c13cdbe0.4cd118","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":620,"wires":[[]]},{"id":"4dd4b288.188a0c","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1740,"y":180,"wires":[["69449a89.053b34"]]},{"id":"69449a89.053b34","type":"function","z":"79016d77.f7b894","name":"","func":"node.warn(flow.get(\"sensorData[1]\"));\nreturn msg;","outputs":1,"noerr":0,"x":1900,"y":180,"wires":[[]]},{"id":"bc325d0b.dff3a","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"1","x":150,"y":80,"wires":[["305a44cb.98940c"]]},{"id":"305a44cb.98940c","type":"function","z":"79016d77.f7b894","name":"Flow Variables","func":"flow.set('id0LowCriticalCount', 0);\nflow.set('id0LowCount', 0);\nflow.set('id0HighCount', 0);\nflow.set('id0HighCriticalCount', 0);\n\nflow.set('id1LowCriticalCount', 0);\nflow.set('id1LowCount', 0);\nflow.set('id1HighCount', 0);\nflow.set('id1HighCriticalCount', 0);\n\nflow.set('id2LowCriticalCount', 0);\nflow.set('id2LowCount', 0);\nflow.set('id2HighCount', 0);\nflow.set('id2HighCriticalCount', 0);\n\nflow.set('id3LowCriticalCount', 0);\nflow.set('id3LowCount', 0);\nflow.set('id3HighCount', 0);\nflow.set('id3HighCriticalCount', 0);\n\nflow.set('id4LowCriticalCount', 0);\nflow.set('id4LowCount', 0);\nflow.set('id4HighCount', 0);\nflow.set('id4HighCriticalCount', 0);\n\nflow.set('id5LowCriticalCount', 0);\nflow.set('id5LowCount', 0);\nflow.set('id5HighCount', 0);\nflow.set('id5HighCriticalCount', 0);\n\nflow.set('id6LowCriticalCount', 0);\nflow.set('id6LowCount', 0);\nflow.set('id6HighCount', 0);\nflow.set('id6HighCriticalCount', 0);\n\nflow.set('id7LowCriticalCount', 0);\nflow.set('id7LowCount', 0);\nflow.set('id7HighCount', 0);\nflow.set('id7HighCriticalCount', 0);\n\nflow.set('id8LowCriticalCount', 0);\nflow.set('id8LowCount', 0);\nflow.set('id8HighCount', 0);\nflow.set('id8HighCriticalCount', 0);\n\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":80,"wires":[[]]},{"id":"ff97c9f6.7681c8","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"2","x":150,"y":440,"wires":[["b98ada81.7b04e8"]]},{"id":"b98ada81.7b04e8","type":"file in","z":"79016d77.f7b894","name":"myform.txt","filename":"/home/pi/Desktop/myform.txt","format":"utf8","chunk":false,"sendError":false,"x":330,"y":440,"wires":[["a7b8f5c3.a3d228"]]},{"id":"a7b8f5c3.a3d228","type":"function","z":"79016d77.f7b894","name":"settings obj","func":"global.set(\"Esettings\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":440,"wires":[["126ce019.ab13f"]]},{"id":"126ce019.ab13f","type":"json","z":"79016d77.f7b894","name":"","property":"payload","action":"","pretty":false,"x":690,"y":440,"wires":[["4c68515b.8ffc8"]]},{"id":"725754bd.0c5f9c","type":"file","z":"79016d77.f7b894","name":"myform.txt","filename":"/home/pi/Desktop/myform.txt","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1070,"y":440,"wires":[["9351472f.e7c848"]]},{"id":"9351472f.e7c848","type":"function","z":"79016d77.f7b894","name":"settings obj","func":"global.set(\"Esettings\",msg.payload);\nvar NoOfRecip=msg.payload.NoOfRecip;\nvar email=[];\nvar Mobile=[];\nvar RecipDetails=msg.payload.RecipDetails;\nfor(i=0;i<NoOfRecip;i++)\n{\n    email[i]=RecipDetails[i].EmailId;\n    Mobile[i]=RecipDetails[i].Mobile;\n}\n//node.warn([email,Mobile]);\nflow.set('NoOfRecip',NoOfRecip)\nflow.set('MobileNo',Mobile);\nflow.set('EmailID',email);\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":440,"wires":[[]]},{"id":"4c68515b.8ffc8","type":"ui_template","z":"79016d77.f7b894","group":"476e56fc.e5ec48","name":"NotificationSetting","order":3,"width":"24","height":11,"format":"<html>\n<body>\n<style>\ninput[type=text]{\n    \tbackground-color: white;\n    \ttext-align : center;\n    \tcolor : black;\n        border:none;\n        padding : 7px;\n    }\n    input[type=submit] {\n  background-color: #4CAF50;\n  color: white;\n  padding: 5px 7px;\n  text-align : center;\n  border: none;\n  border-radius: 1px;\n  cursor: allowed;\n  float: left;\n}\n\ninput[type=submit]:hover {\n  background-color: #45a049;\n}\ntable, tr, th, td {\n        \n        background-color: white;\n        border-collapse: collapse;\n\t\tborder: 1px solid black;\n\t\tcolor : black;\n\t\ttext-align : center;\n\t\tpadding: 1px\n}\n\n input[type=number]{\n    background-color: white;\n    color : black;\n    text-align : center;\n    border : 1px solid #0093dc;\n    padding : 7px 6px;\n    text-align : center;\n    }   \n    th{\n\talign : center;\n\t  color: white;\n\t  font-weight: normal;\n\t  font-family: Candara;\n\t  font-size: 110%;\n\t  background-color:#097479;\n\t  padding : 7px 3px\n\t  }\n</style>\n\n    \n<form id=\"MobileNoForm\"  ng-submit=\"submitlist()\" ng-repeat=\"SetVal in Val\" align=\"justify\">\n<br>\n<div padding: 5px;  margin: 5px;\" >\n<div class = \"addrow\">\n<div class = \"column\">\n<br><br>\n\n<table align = \"center\" id=\"mytable\" class=\"table table-bordered\">\n<thead>\n<tr>\n<th style=\"width:5%;\">Sr.No.</th>\n<th style=\"width:20% type='text' name ='Name';\">Name</th>\n<th style=\"width:30% type='text' name ='Mobile';\">Mobile Number</th>\n<th style=\"width:30% type='text' name ='EmailId';\">E-mail Id</th>\n<th style=\"width:15%;\">Actions</th>                             \n</tr>\n</thead>\n<tbody align=\"center\">\n<tr ng-repeat=\"Details in recipients\">\n<td>{{$index+1}}</td>\n<td><input  type=\"text\" name=\"Name{{$index}}\" placeholder = \"Enter Name of recipient..\" ng-model=\"Details.Name\" required></td>\n<td><input type=\"text\" name=\"Mobile{{$index}}\"  placeholder = \"Enter Mobile No...\" ng-model=\"Details.Mobile\" required></td>\n<td><input type=\"text\" name=\"EmailId{{$index}}\"  placeholder = \"Enter Email Id...\" ng-model=\"Details.EmailId\" required></td>\n<td><div class=\"buttons\">\n<input type=\"button\" value=\"Delete\" ng-click=\"deleteDetails($index)\" ng-style=\"{background: '#ffc399', color:'black', border : '1px solid #0093dc', cursor: 'allowed'}\"></div></td>\n</tr>\n</tbody>\n</table>\n<br><br>\n<input type=\"button\" name=\"NoOfRecip\"  value =\"Add Recipient\" ng-click=\"addRecipient()\" ng-style=\"{align:'right',float: 'left',background: '#7dcfff', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\">\n</div>\n</div>\n</div>\n<input type=\"submit\" class=\"btn btn-primary\" value=\"Submit\" ng-style=\"{float: 'right', background: '#54e18a', color:'Black',padding: '4px 6px', border: 'none', cursor: 'allowed'}\"/>   \n\n</form>\n<script>\n\t (function(scope) {   \t\n  scope.$watch('msg', function(msg) {\n    if (msg) {\n    \t\n      $(\"#my_\"+scope.$id).html(msg.payload);\n   scope.data = angular.copy(msg.payload.RecipDetails);\n    scope.SetVal = angular.copy(msg.payload.SetVal);\n    }\n   scope.recipients = angular.copy(scope.data);\n    scope.Val = angular.copy(scope.SetVal); \n  });\n\n//scope.SetVal =[{XBand1:150,YBand1:150,ZBand1:150}];\n  \n//scope.Val = angular.copy(scope.SetVal);\n\t scope.enabledEdit = [];\t\n //scope.data = [{ Name:\"\",Mobile:\"\",EmailId:\"\"}];\n  \n//\tscope.recipients = angular.copy(scope.data);\n\n\t \n\t    scope.addRecipient = function(){\n\t    \n\t    if(scope.recipients.length< 15)\n\t    {\n\tvar Details ={Name:\"\",Mobile:\"\",EmailId:\"\"};\n\t\tscope.recipients.push(Details);\n\t\tscope.enabledEdit[scope.recipients.length-1]=true;\n\t\t\n\t\t}\n\t\telse\n\t\t{\n\talert(\"Only 15 entries allowed\");\n\t\t}\n}\n\t  scope.editDetails = function(index){\n\t  console.log(\"edit index\"+index);\n\t  scope.enabledEdit[index] = true;\n\t}\n\tscope.deleteDetails = function(index) {\n\t\tvar r = confirm(\"Are you sure you want to delete?\");\n  if (r == true) {\n    txt = \"You pressed OK!\";\n    scope.recipients.splice(index,1);\n  } else {\n    txt = \"You pressed Cancel!\";\n  }\n  document.getElementById(\"demo\").innerHTML = txt;\n\t\n\t}\n\n\t\n\t scope.submitlist = function(){\n\nvar msg={\"payload\":{\"RecipDetails\" :(scope.recipients),\"NoOfRecip\":(scope.recipients.length),\"SetVal\":(scope.Val)}};\nscope.send(msg);\n\twindow.confirm(\"Data Saved\");\n\nconsole.log(\"form submitted:\"+angular.toJson(scope.recipients));\n\n}\n})(scope);\n</script>            \n</body>\n</html>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":870,"y":440,"wires":[["725754bd.0c5f9c","25bbf3f5.df581c"]]},{"id":"25bbf3f5.df581c","type":"debug","z":"79016d77.f7b894","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1080,"y":520,"wires":[]},{"id":"ae348390.1ff7","type":"inject","z":"79016d77.f7b894","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":560,"wires":[["445c1fa0.61f7f"]]},{"id":"445c1fa0.61f7f","type":"function","z":"79016d77.f7b894","name":"","func":"msg.payload =  new Date().toLocaleString();\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":560,"wires":[["cc8f184e.0353d8"]]},{"id":"cc8f184e.0353d8","type":"ui_text","z":"79016d77.f7b894","group":"2bf05bec.224e34","order":1,"width":6,"height":1,"name":"","label":"Date:","format":"{{msg.payload}}","layout":"row-left","x":450,"y":560,"wires":[]},{"id":"8885af82.bc53a","type":"rbe","z":"79016d77.f7b894","name":"","func":"rbei","gap":"","start":"","inout":"out","property":"Check","x":1090,"y":660,"wires":[["8d6afd6c.b74ae","fa86a43a.cf1ea8"]]},{"id":"8d6afd6c.b74ae","type":"e-mail","z":"79016d77.f7b894","d":true,"server":"vikmail.godrej.com","port":"25","secure":false,"tls":false,"name":"","dname":"","x":1370,"y":1140,"wires":[]},{"id":"c1a8eb93.9ad848","type":"debug","z":"79016d77.f7b894","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2920,"y":80,"wires":[]},{"id":"fa86a43a.cf1ea8","type":"debug","z":"79016d77.f7b894","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1390,"y":1080,"wires":[]}]